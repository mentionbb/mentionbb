var app={};(function(context){context.post=function(url,data,processData=!0,contentType="application/x-www-form-urlencoded"){var promise=$.ajax({url:app.config.settings.ajax_path+"/"+url,type:"post",data:data,dataType:"JSON",processData:processData,contentType:contentType}).done(function(responseData,status,xhr){}).fail(function(xhr,status,err){});return promise};context.scrollTopAnchor=function(target){$('html, body').animate({scrollTop:(target.offset().top)},500);$(target).addClass('highlight');setTimeout(function(){$(target).removeClass('highlight')},1000)};context.editorConfig=function(id,style='default'){if(typeof app.visitor=='undefined'){return!1}
if(Storages.cookieStorage.get("night_mode")||style=='dark'){var theme='oxide-dark';var content_theme='dark'}else{var theme='oxide';var content_theme='default'}
if(app.config.settings.emoticon_database=='local'){twemoji.base=app.config.settings.public_dir+'/images/emoticons';twemoji.size=''}else if(app.config.settings.emoticon_database=='twemoji'){twemoji.base='https://twemoji.maxcdn.com/v/latest/';twemoji.size='72x72'}
twemoji.className='js-Twemoji_MentionEditor';app.setupEditorLanguage();tinymce.init({selector:id,skin:"oxide",skin_url:app.config.settings.public_dir+"/vendor/tinymce/skins/ui/"+theme,content_css:app.config.settings.public_dir+"/vendor/tinymce/skins/content/"+content_theme+"/content.min.css",content_style:".mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before { color: rgb(150 150 150); } p {margin:0; padding: 0;} img.js-Twemoji_MentionEditor { width: 22px; height: 22px; vertical-align: text-bottom; } .mce-content-body [data-mce-selected=inline-boundary] { color: #000; }",language:'app_EditorLanguage',plugins:"bbcodeCustom code autoresize imagetools autolink link image customEmoticons lists codesample media table autosave userTagging spoiler quoteMessage paste",toolbar:app.setupEditorToolbars(),invalid_elements:"div",paste_webkit_styles:"font-size color",menubar:!1,statusbar:!1,min_height:230,max_height:400,autosave_interval:"30s",autosave_ask_before_unload:!1,autosave_restore_when_empty:!0,file_picker_types:'image',file_picker_callback:app.editorFilePickerCallback(),relative_urls:!1,remove_script_host:!1,convert_urls:!0,placeholder:app.phrases.editor_placeholder,codesample_languages:[{text:'HTML/XML',value:'markup'},{text:'JavaScript',value:'javascript'},{text:'CSS',value:'css'},{text:'PHP',value:'php'},{text:'Twig',value:'twig'},{text:'Ruby',value:'ruby'},{text:'Python',value:'python'},{text:'Java',value:'java'},{text:'C',value:'c'},{text:'C#',value:'csharp'},{text:'C++',value:'cpp'}],codesample_global_prismjs:!0,entity_encoding:"raw",setup:function(editor){$.each(app.setupEditorButtons(),function(i,item){var content=item.bbcode;editor.ui.registry.addButton(item.title,{icon:item.title,tooltip:item.title,onAction:function(_){editor.insertContent('\n'+content.replace('{content}',editor.selection.getContent())+'\n')}})});$.each(app.setupEditorToolbarIcons(),function(i,item){editor.ui.registry.addIcon(item.name,item.icon)});editor.on('init',function(e){$('.tox-tbtn').tooltip({boundary:'window',trigger:'hover'});$('.tox-split-button').tooltip({boundary:'window',trigger:'hover'})})},})};context.setupEditorLanguage=function(){try{var lang=$.parseJSON($('.app_EditorLanguage').first().html())||{}}catch(e){var lang={};console.error('Editor language could not be loaded. The default language is English.')}
tinymce.addI18n('app_EditorLanguage',lang)};context.setupEditorToolbars=function(){try{var toolbars=$.parseJSON($('.app_EditorToolbars').first().html()).toolbars||{}}catch(e){var toolbars={};console.error('Editor toolbars could not be loaded.')}
return toolbars};context.setupEditorButtons=function(){try{var buttons=$.parseJSON($('.app_EditorButtons').first().html()).buttons||{}}catch(e){var buttons={}}
return buttons};context.setupEditorToolbarIcons=function(){try{var icons=$.parseJSON($('.app_EditorToolbarIcons').first().html()).icons||{}}catch(e){var icons={}}
return icons};context.editorFilePickerCallback=function(){return function(cb,value,meta){var input=document.createElement('input');input.setAttribute('type','file');input.setAttribute('accept',app.config.settings.editor.image_filepicker_types);input.onchange=function(){var file=this.files[0];var reader=new FileReader();var fd=new FormData();var files=file;fd.append('filetype',meta.filetype);fd.append("file",files);var filename="";var xhr,formData;xhr=new XMLHttpRequest();xhr.withCredentials=!1;xhr.open('POST',app.config.settings.site_url+"/attachments/editor-image-upload");xhr.onload=function(){var json;if(xhr.status!=200){alert('HTTP Error: '+xhr.status);return}
json=JSON.parse(xhr.responseText);if(!json||typeof json.location!='string'){alert('Invalid JSON: '+xhr.responseText);return}
filename=json.location;reader.onload=function(e){cb(filename)};reader.readAsDataURL(file)};xhr.send(fd);return};input.click()}};context.getStats=function(id){var body=tinymce.get(id).getBody(),text=tinymce.trim(body.innerText||body.textContent);return{chars:text.length,words:text.split(/[\w\u2019\'-]+/).length}};context.flashMessage=function(text,type='info'){if(type==='info'){$('.app-alert-container').removeClass('alert-login');var time=3000}else if(type==='warning'){$('.app-alert-container').addClass('alert-login');var time=5000}
$('.app-alert-container > .app-alert > span').html(text);$(".app-alert-container > .app-alert").slideDown('fast');setTimeout(function(){$('.app-alert-container > .app-alert').slideUp("fast")},time)};context.reactionBox=function(){if($(".like-button").length){$(".like-button").hover(function(){$(this).find(".reaction-box").fadeIn(100,function(){$(this).find(".reaction-icon").each(function(i,e){setTimeout(function(){$(e).addClass("show")},i*80)})})},function(){setTimeout(function(){$(".reaction-box").fadeOut(200,function(){$(this).find(".reaction-icon").removeClass("show")})},100)})}};context.twitterApi=function(){if($('body[data-template="discussion"] .bbWrapper_twitter:not(.loaded)').length){$('.bbWrapper_twitter:not(.loaded)').each(function(){var elem=$(this);var tweet=$(this).find('#tweet');var id=tweet.data("tweet-id");if(Storages.cookieStorage.get("night_mode")){var theme='dark'}else{var theme='light'}
$(this).closest('.app-post').find('.progress').removeClass('d-none');$.getScript("https://platform.twitter.com/widgets.js",function(data,textStatus,jqxhr){twttr.widgets.createTweet(id,tweet.get(0),{conversation:'all',cards:'visible',linkColor:'#cc0000',theme:theme}).then(function(el){});twttr.ready(function(twttr){twttr.events.bind('rendered',function(event){elem.closest('.app-post').find('.progress').addClass('d-none')})})});$(this).addClass('loaded')})}};context.getPath=function(removeSlash=!1){return window.location.pathname};context.removeEditorDraft=function(){Storages.localStorage.remove('tinymce-autosave-'+app.getPath(!0)+'-post-editor-draft');Storages.localStorage.remove('tinymce-autosave-'+app.getPath(!0)+'-post-editor-time')};context.initTooltip=function(){$('img:not(.user-status, .js-Twemoji_MentionEditor, .no-tooltip)').tooltip({container:'.app-page-content'});$('a:not(.app-share-button, .no-tooltip)').tooltip({container:'.app-page-content'});$('.toggle-tooltip:not(.app-share-button, .no-tooltip)').tooltip({container:'.app-page-content'});$('img.js-Twemoji_MentionEditor').tooltip({container:'.app-page-content',title:function(){return"<div class=\"d-flex align-items-center\"><img src=\""+$(this).attr('src')+"\" /><div class=\"ml-3\"><span>"+$(this).data('shortcut')+"<a href=\"#\" class=\"copy\" title=\""+app.phrases.copy+"\"></a></span><span>"+$(this).data('title')+"</span></div></div>"},template:'<div class="tooltip tooltipEmojiBox" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',boundary:'window',trigger:'manual',html:!0,offset:'0'}).on("mouseenter",function(){var _this=this;$(_this).tooltip('show');$(".tooltipEmojiBox").on("mouseleave",function(){$(_this).tooltip('hide')})}).on("mouseleave",function(){var _this=this;setTimeout(function(){if(!$(".tooltipEmojiBox:hover").length){$(_this).tooltip('hide')}},100)});$('img.user-status.online.no-tooltip').tooltip({container:'.app-page-content',template:'<div class="tooltip user-status-online" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'});$('img.user-status.offline.no-tooltip').tooltip({container:'.app-page-content',template:'<div class="tooltip user-status-offline" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'})};context.isMobile=function(){var isMobile=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))){isMobile=!0}
return isMobile}})(app);if(window.jQuery===undefined)jQuery=$={};!(function($,window,document){"use strict";$.fn.extend({isChanged:function(){return this.data("changed")},trackChanges:function(){$(":input",this).change(function(){$(this.form).data("changed",!0)})},alterClass:function(removals,additions){var self=this;if(removals.indexOf("*")===-1){self.removeClass(removals);return!additions?self:self.addClass(additions)}
var patt=new RegExp("\\s"+removals.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");self.each(function(i,it){var cn=" "+it.className+" ";while(patt.test(cn)){cn=cn.replace(patt," ")}
it.className=$.trim(cn)});return!additions?self:self.addClass(additions)},isOnScreen:function(){var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft(),};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=this.offset();bounds.right=bounds.left+this.outerWidth();bounds.bottom=bounds.top+this.outerHeight();return!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom)},donetyping:function(callback,timeout){timeout=timeout||1e3;var timeoutReference,doneTyping=function(el){if(!timeoutReference)return;timeoutReference=null;callback.call(el)};return this.each(function(i,el){var $el=$(el);$el.is(":input")&&$el.on("keyup keypress paste",function(e){if(e.type=="keyup"&&e.keyCode!=8)return;if(timeoutReference)clearTimeout(timeoutReference);timeoutReference=setTimeout(function(){doneTyping(el)},timeout)}).on("blur",function(){doneTyping(el)})})},stickySidebar:function(options){var defaults={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",};options=$.extend(defaults,options);options.additionalMarginTop=parseInt(options.additionalMarginTop)||0;options.additionalMarginBottom=parseInt(options.additionalMarginBottom)||0;tryInitOrHookIntoEvents(options,this);function tryInitOrHookIntoEvents(options,$that){var success=tryInit(options,$that);if(!success){console.log("TST: Body width smaller than options.minWidth. Init is delayed.");$(document).scroll((function(options,$that){return function(evt){var success=tryInit(options,$that);if(success){$(this).unbind(evt)}}})(options,$that));$(window).resize((function(options,$that){return function(evt){var success=tryInit(options,$that);if(success){$(this).unbind(evt)}}})(options,$that))}}
function tryInit(options,$that){if(options.initialized===!0){return!0}
if($("body").width()<options.minWidth){return!1}
init(options,$that);return!0}
function init(options,$that){options.initialized=!0;$("head").append($('<style>.StickySidebar:after {content: ""; display: table; clear: both;}</style>'));$that.each(function(){var o={};o.sidebar=$(this);o.options=options||{};o.container=$(o.options.containerSelector);if(o.container.length==0){o.container=o.sidebar.parent()}
o.sidebar.parents().css("-webkit-transform","none");o.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",});o.stickySidebar=o.sidebar.find(".StickySidebar");if(o.stickySidebar.length==0){o.sidebar.find("script").remove();o.stickySidebar=$("<div>").addClass("StickySidebar").append(o.sidebar.children());o.sidebar.append(o.stickySidebar)}
o.marginTop=parseInt(o.sidebar.css("margin-top"));o.marginBottom=parseInt(o.sidebar.css("margin-bottom"));o.paddingTop=parseInt(o.sidebar.css("padding-top"));o.paddingBottom=parseInt(o.sidebar.css("padding-bottom"));var collapsedTopHeight=o.stickySidebar.offset().top;var collapsedBottomHeight=o.stickySidebar.outerHeight();o.stickySidebar.css("padding-top",1);o.stickySidebar.css("padding-bottom",1);collapsedTopHeight-=o.stickySidebar.offset().top;collapsedBottomHeight=o.stickySidebar.outerHeight()-collapsedBottomHeight-collapsedTopHeight;if(collapsedTopHeight==0){o.stickySidebar.css("padding-top",0);o.stickySidebarPaddingTop=0}else{o.stickySidebarPaddingTop=1}
if(collapsedBottomHeight==0){o.stickySidebar.css("padding-bottom",0);o.stickySidebarPaddingBottom=0}else{o.stickySidebarPaddingBottom=1}
o.previousScrollTop=null;o.fixedScrollTop=0;resetSidebar();o.onScroll=function(o){if(!o.stickySidebar.is(":visible")){return}
if($("body").width()<o.options.minWidth){resetSidebar();return}
if(o.options.disableOnResponsiveLayouts){var sidebarWidth=o.sidebar.outerWidth(o.sidebar.css("float")=="none");if(sidebarWidth+50>o.container.width()){resetSidebar();return}}
var scrollTop=$(document).scrollTop();var position="static";if(scrollTop>=o.container.offset().top+(o.paddingTop+o.marginTop-o.options.additionalMarginTop)){var offsetTop=o.paddingTop+o.marginTop+options.additionalMarginTop;var offsetBottom=o.paddingBottom+o.marginBottom+options.additionalMarginBottom;var containerTop=o.container.offset().top;var containerBottom=o.container.offset().top+getClearedHeight(o.container);var windowOffsetTop=0+options.additionalMarginTop;var windowOffsetBottom;var sidebarSmallerThanWindow=o.stickySidebar.outerHeight()+offsetTop+offsetBottom<$(window).height();if(sidebarSmallerThanWindow){windowOffsetBottom=windowOffsetTop+o.stickySidebar.outerHeight()}else{windowOffsetBottom=$(window).height()-o.marginBottom-o.paddingBottom-options.additionalMarginBottom}
var staticLimitTop=containerTop-scrollTop+o.paddingTop+o.marginTop;var staticLimitBottom=containerBottom-scrollTop-o.paddingBottom-o.marginBottom;var top=o.stickySidebar.offset().top-scrollTop;var scrollTopDiff=o.previousScrollTop-scrollTop;if(o.stickySidebar.css("position")=="fixed"){if(o.options.sidebarBehavior=="modern"){top+=scrollTopDiff}}
if(o.options.sidebarBehavior=="stick-to-top"){top=options.additionalMarginTop}
if(o.options.sidebarBehavior=="stick-to-bottom"){top=windowOffsetBottom-o.stickySidebar.outerHeight()}
if(scrollTopDiff>0){top=Math.min(top,windowOffsetTop)}else{top=Math.max(top,windowOffsetBottom-o.stickySidebar.outerHeight())}
top=Math.max(top,staticLimitTop);top=Math.min(top,staticLimitBottom-o.stickySidebar.outerHeight());var sidebarSameHeightAsContainer=o.container.height()==o.stickySidebar.outerHeight();if(!sidebarSameHeightAsContainer&&top==windowOffsetTop){position="fixed"}else if(!sidebarSameHeightAsContainer&&top==windowOffsetBottom-o.stickySidebar.outerHeight()){position="fixed"}else if(scrollTop+top-o.sidebar.offset().top-o.paddingTop<=options.additionalMarginTop){position="static"}else{position="absolute"}}
if(position=="fixed"){o.stickySidebar.css({position:"fixed",width:o.sidebar.width(),top:top,left:o.sidebar.offset().left+parseInt(o.sidebar.css("padding-left")),})}else if(position=="absolute"){var css={};if(o.stickySidebar.css("position")!="absolute"){css.position="absolute";css.top=scrollTop+top-o.sidebar.offset().top-o.stickySidebarPaddingTop-o.stickySidebarPaddingBottom}
css.width=o.sidebar.width();css.left="";o.stickySidebar.css(css)}else if(position=="static"){resetSidebar()}
if(position!="static"){if(o.options.updateSidebarHeight==!0){o.sidebar.css({"min-height":o.stickySidebar.outerHeight()+o.stickySidebar.offset().top-o.sidebar.offset().top+o.paddingBottom,})}}
o.previousScrollTop=scrollTop};o.onScroll(o);$(document).scroll((function(o){return function(){o.onScroll(o)}})(o));$(window).resize((function(o){return function(){o.stickySidebar.css({position:"static"});o.onScroll(o)}})(o));function resetSidebar(){o.fixedScrollTop=0;o.sidebar.css({"min-height":"1px",});o.stickySidebar.css({position:"static",width:"",})}
function getClearedHeight(e){var height=e.height();e.children().each(function(){height=Math.max(height,$(this).height())});return height}})}},replaceText:function(search,replace,text_only){return this.each(function(){var node=this.firstChild,val,new_val,remove=[];if(node){do{if(node.nodeType===3){val=node.nodeValue;new_val=val.replace(search,replace);if(new_val!==val){if(!text_only&&/</.test(new_val)){$(node).before(new_val);remove.push(node)}else{node.nodeValue=new_val}}}}while(node=node.nextSibling);}
remove.length&&$(remove).remove()})}});Storages.cookieStorage.setConf({path:'/',expires:30});if('serviceWorker' in navigator){window.addEventListener('load',function(){navigator.serviceWorker.register(app.config.settings.site_url+'/service-worker.js').then(function(registration){},function(err){console.log('ServiceWorker registration failed: ',err)}).catch(function(err){console.log(err)})})}else{console.log('service worker is not supported')}
$(function(){if($('textarea[data-single-line="true"]').length){document.querySelector('textarea[data-single-line="true"]').addEventListener("keydown",(e)=>{if(e.keyCode===13)e.preventDefault();})}});$(document).on("click",".dropdown:not(.bootstrap-select) .dropdown-menu",function(e){e.stopPropagation()});$(document).on("click",'[data-ui="show-editor"], .app-post-create .bootstrap-select > .dropdown-menu a',function(){if(!tinymce.get('post-editor')||$(".app-post-create .app-writer-area").hasClass('d-none')){$(".app-post-create .progress").removeClass("d-none");app.editorConfig("#post-editor");setTimeout(function(){$(".app-post-create .app-writer-area").removeClass("d-none");$('.app-post-create .post-content [name="post-title"]').focus();if($(".title-area.in-discussion").length){$(".title-area.in-discussion").removeClass("d-flex");$(".title-area.in-discussion").hide();if($(this).data("scroll")){app.scrollTopAnchor($(".app-post-create"))}
tinyMCE.activeEditor.focus()}
$(".app-post-create .progress").addClass("d-none")},200)}});$(function(){$(".navbar .search-container :input").donetyping(function(){if($(this).val().length>0&&$(this).val()!=' '){$('.navbar .search-container').addClass('show');$('.navbar .search-container > .search-results').addClass('animate');$('.navbar .search-container > .search-results').addClass('fadeIn');$('.navbar .search-container > .search-results').removeClass('d-none');$('.navbar .search-container > .search-results .load-area').nextAll().remove();$('.navbar .search-container > .search-results .load-area').addClass('d-block');var dataString={keyword:$(this).val()};if($('body .search-results-backdrop').length<1){$('body').append('<div class="modal-backdrop search-results-backdrop show"></div>')}
$(".navbar").css("z-index","1041");$(".navbar").addClass('sticky-top');app.post("search/quick-search",dataString).done(function(response){if(response.status==="ok"){$('.navbar .search-container > .search-results .load-area').removeClass('d-block');$('.navbar .search-container > .search-results .load-area').addClass('d-none');$('.navbar .search-container > .search-results .load-area').after(response.template);$('.navbar .search-container > .search-results .discussions a > span').replaceText(new RegExp('('+dataString.keyword+')','gi'),'<span class="font-weight-bold">$1</span>');$('.navbar .search-container > .search-results .users a > span').replaceText(new RegExp('('+dataString.keyword+')','gi'),'<span class="font-weight-bold">$1</span>')}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('click','.navbar .search-container .form-control-clear',function(e){$('.navbar .search-container').removeClass('show');$('.navbar .search-container > .search-results').addClass('d-none');$('.navbar .search-container > .search-results').removeClass('animate');$('.navbar .search-container > .search-results').removeClass('fadeIn');$('.modal-backdrop.search-results-backdrop').remove();$(".navbar").css("z-index","1");$(".navbar").removeClass('sticky-top')});$(document).on('click','.modal-backdrop.search-results-backdrop',function(e){$('.navbar .search-container').removeClass('show');$('.navbar .search-container > .search-results').addClass('d-none');$('.navbar .search-container > .search-results').removeClass('animate');$('.navbar .search-container > .search-results').removeClass('fadeIn');$('.modal-backdrop.search-results-backdrop').remove();$(".navbar").css("z-index","1");$(".navbar").removeClass('sticky-top')});$(document).on('click','.navbar .search-container input[type="text"]',function(e){if($('.navbar .search-container > .search-results .load-area').nextAll().length>0){$('.navbar .search-container').addClass('show');$('.navbar .search-container > .search-results').removeClass('d-none');$('.navbar .search-container > .search-results').addClass('animate');$('.navbar .search-container > .search-results').addClass('fadeIn');if($('body .search-results-backdrop').length<1){$('body').append('<div class="modal-backdrop search-results-backdrop show"></div>')}
$(".navbar").css("z-index","1041");$(".navbar").addClass('sticky-top')}});$(document).on('click','.notification .friendship-request-buttons > button',function(e){if($(this).hasClass('approve')){var elem=$(this);var dataString={sender_id:$(this).closest('.friendship-request-buttons').data('sender-id')};app.post("account/approve-request-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.friendship-request-buttons').find('.approved-friendship-request').show();elem.closest('.friendship-request-buttons').find('button').remove()}}).fail(function(xhr,status,err){console.log(status,err)})}else{var elem=$(this);var dataString={sender_id:$(this).closest('.friendship-request-buttons').data('sender-id')};app.post("account/remove-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.friendship-request-buttons').find('.removed-friendship-request').show();elem.closest('.friendship-request-buttons').find('button').remove()}}).fail(function(xhr,status,err){console.log(status,err)})}});$('.checkbox.switcher > label').on('click',function(){if(!$(this).find('input').is(':checked')){$(this).find('input').removeAttr('checked')}else{$(this).find('input').attr('checked',!0)}});$(function(){$('.has-clear input[type="text"]').on('input propertychange',function(){var $this=$(this);var visible=Boolean($this.val());$this.siblings('.form-control-clear').toggleClass('d-none',!visible)}).trigger('propertychange');$('.form-control-clear').click(function(){$(this).siblings('input[type="text"]').val('').trigger('propertychange').focus()})});$(function(){var cookieAlert=document.querySelector(".cookiealert");var acceptCookies=document.querySelector(".acceptcookies");cookieAlert.offsetHeight;if(!Storages.localStorage.get("acceptCookies")){cookieAlert.classList.add("show")}
acceptCookies.addEventListener("click",function(){Storages.localStorage.set("acceptCookies",!0);cookieAlert.classList.remove("show")})});$(function(){if($('.sticky').length>0){$('.sticky').stickySidebar({additionalMarginTop:40})}});$(document).on('focusin',function(e){if($(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length){e.stopImmediatePropagation()}});$(document).ready(function(){app.initTooltip()});$(document).bind('ajaxStop',function(){app.initTooltip()})})(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){window.verifyRecaptchaCallback=function(response){$('#register-attempt input[data-recaptcha]').val(response).trigger('change');$('#register-attempt form').addClass('validated')}
window.expiredRecaptchaCallback=function(){$('#register-attempt input[data-recaptcha]').val("").trigger('change');$('#register-attempt form').removeClass('validated')}
$(document).on('click','#register-attempt [name="login-submit"]',function(){if($('#register-attempt form.validated').length<1){$('#register-attempt #g-recaptcha-error').removeClass('d-none')}})});$(function(){if($('.alert-login').length){$("#login-attempt").modal()}});$(document).on('click','[data-ui="login-attempt"]',function(){event.preventDefault();$("#login-attempt").modal();$('[name="username"]').focus();$(document).on('click','#login-attempt .modal-body a.register',function(){event.preventDefault();$("#login-attempt .close").click();$("#register-attempt").modal()})});$(document).on('click','[data-ui="register-attempt"]',function(){event.preventDefault();$("#register-attempt").modal();$('[name="mail"]').focus();$(document).on('click','#register-attempt .modal-body a.login',function(){event.preventDefault();$("#register-attempt .close").click();$("#login-attempt").modal()})});$(document).on('click','[data-ui="sign-out-confirmation"]',function(){event.preventDefault();$("#sign-out-confirmation").modal()});$(document).on('click','[data-ui="forgot-password"]',function(){event.preventDefault();$(this).closest('.modal').find('.close').click();$("#forgot-password-attempt").modal();$('[name="mail"]').focus()});$(function(){$("#register-attempt form :input[name='username']").donetyping(function(){var dataString={username:$(this).val()};$("#register-attempt form .post-loader-spin").show();$("#register-attempt form #username-control").removeClass('available');$("#register-attempt form #username-control").removeClass('not-available');if($(this).val().length>0){app.post("auth/control-username",dataString).done(function(response){if(response.status==="ok"){$("#register-attempt form .post-loader-spin").hide();if(response.exist===0){$("#register-attempt form #username-control").addClass('available');$("#register-attempt form #username-control").text(app.phrases.username_available);$("#register-attempt form button").attr('disabled',!1)}else if(response.exist===1){$("#register-attempt form #username-control").addClass('not-available');$("#register-attempt form #username-control").text(app.phrases.username_not_available);$("#register-attempt form button").attr('disabled',!0)}}}).fail(function(xhr,status,err){console.log(status,err)})}else{}})});$(function(){if($('.app-account-area .notify-count').text()>0){var title=$(document).attr('title');document.title='('+$('.app-account-area .notify-count').text()+') '+title;$('.app-account-area .btn-app-account.notification').on('click',function(){document.title=title;$('.app-account-area .notify-count').text('');$.ajax({url:app.config.settings.site_url+"/account/mark-read-notifications",type:"post",success:function(response){}})})}
if($('.app-account-area .message-count').text()>0){var title=$(document).attr('title');document.title='('+$('.app-account-area .message-count').text()+') '+title;$('.app-account-area [data-ui="markread-messages"]').on('click',function(e){e.preventDefault();document.title=title;$.ajax({url:app.config.settings.site_url+"/account/mark-read-messages",type:"post",success:function(response){$('.app-account-area .message-count').text('');$('.message-menu a.message').attr('data-is-seeing',1)}})})}else{$('.app-account-area [data-ui="markread-messages"]').on('click',function(e){e.preventDefault()})}
$('.app-account-area [data-ui="message-refresher"]').on('click',function(e){e.preventDefault();$('.message-menu a.notification.message').remove();$('.message-menu .no-records').remove();$('.message-menu .post-loader-spin').show();app.post("account/refresh-messages",{}).done(function(response){if(response.status==="ok"){$('.message-menu .post-loader-spin').hide();$('.message-menu .post-loader-spin').before(response.template);if($('.message-menu a.message[data-is-seeing="0"]').length){$('.app-account-area .message-count').text($('.message-menu a.message[data-is-seeing="0"]').length)}}}).fail(function(xhr,status,err){console.log(status,err)})});$('.app-account-area [data-ui="notification-refresher"]').on('click',function(e){e.preventDefault();$('.notification-menu a.notification').remove();$('.notification-menu .no-records').remove();$('.notification-menu .post-loader-spin').show();app.post("account/refresh-notification",{}).done(function(response){if(response.status==="ok"){$('.notification-menu .post-loader-spin').hide();$('.notification-menu .post-loader-spin').before(response.template);if($('.notification-menu a.notification[data-is-seeing="0"]').length){$('.app-account-area .notify-count').text($('.notification-menu a.notification[data-is-seeing="0"]').length)}}}).fail(function(xhr,status,err){console.log(status,err)})})});$(function(){$('.app-theme-mode').on('click',function(){if($('.app-theme-mode input').is(':checked')){$(this).addClass('active');$('.app-theme-mode input').attr('checked',!0);$('body').addClass('app-night-mode');$('.navbar .navbar-brand > img').attr('src',app.config.settings.logo.night);Storages.cookieStorage.set('night_mode',!0)}else{$(this).removeClass('active');$('.app-theme-mode input').attr('checked',!1);$('body').removeClass('app-night-mode');$('.navbar .navbar-brand > img').attr('src',app.config.settings.logo.light);Storages.cookieStorage.remove('night_mode')}
$(".app-post-create .progress").removeClass("d-none");setTimeout(function(){if($('#post-editor').length){tinymce.remove();app.editorConfig("#post-editor")}
$(".app-post-create .progress").addClass("d-none")},200)});if(Storages.cookieStorage.get("night_mode")){$('.app-theme-mode').addClass('active');$('.app-theme-mode input').attr('checked',!0);if(!$('body').hasClass('app-night-mode')){$('body').addClass('app-night-mode')}}else{$('.app-theme-mode').removeClass('active');$('.app-theme-mode input').attr('checked',!1)}});$(function(){if($('#twoStepVerification_Modal').length){$('.navbar').remove();$('#twoStepVerification_Modal').modal({backdrop:'static',keyboard:!1});$('form#twoStepVerification input[name="twofa_code"]').focus();$("form#twoStepVerification").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();$('form#twoStepVerification .form-error span').text('');var dataString={twofa_code:$('form#twoStepVerification input[name="twofa_code"]').val()};app.post("two-step-verification/verify",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}else if(response.status==="fail"){$('form#twoStepVerification .form-error span').text(app.phrases.alert_messages.two_step_verification_code_error)}}).fail(function(xhr,status,err){console.log(status,err)})}})}});function userTooltipInit(){$('img.user-status:not(.no-tooltip), a.user-tooltip-link').each(function(i,elem){var elem=$(this);if(window.matchMedia('(max-width: 768px)').matches){$(this).closest('a').on('click',function(e){e.preventDefault()});var placement='top'}else{var placement='right'}
var timer;elem.popover({content:'<div class="post-loader-spin d-block"></div>',container:'body',template:'<div class="popover user-tooltip '+elem.data('user-id')+'" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>',boundary:'window',trigger:'manual',placement:placement,html:!0}).on("mouseenter",function(){var _this=this;timer=setTimeout(function(){if($(_this).attr('data-user-id')===undefined){console.error('Tooltip error: UserId is missing.');return!1}
$(_this).popover('show');var dataString={user_id:$(_this).data('user-id')};app.post("account/profile-tooltip",dataString).done(function(response){if(response.status==="ok"){$(".popover-body").html(response.template)}}).fail(function(xhr,status,err){console.log(status,err)});$(".popover").on("mouseleave",function(){$(_this).popover('hide')})},600)}).on("mouseleave",function(){clearTimeout(timer);var _this=this;setTimeout(function(){if(!$(".popover:hover").length){$(_this).popover('hide')}},300)})})};$('[data-init="js-Mention_ExternalLogin"]').on('click',function(e){window.location.href=app.config.settings.site_url+'/auth/'+$(this).data('callback')});$(document).on('click','.tooltip.tooltipEmojiBox a.copy',function(event){event.preventDefault();var text=$(this).closest('span').text();document.addEventListener('copy',function(e){e.clipboardData.setData('text/plain',text);e.preventDefault()},!0);document.execCommand("copy");app.flashMessage(app.phrases.alert_messages.copy_to_clipboard)});$(document).bind('ajaxStop',function(){userTooltipInit()});$(document).ready(function(){userTooltipInit()})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){$(".app-admin-user-search.search-container :input").donetyping(function(){if($(this).val().length>0&&$(this).val()!=' '){$('.app-admin-user-search.search-container').addClass('show');$('.app-admin-user-search.search-container > .search-results').addClass('animate');$('.app-admin-user-search.search-container > .search-results').addClass('fadeIn');$('.app-admin-user-search.search-container > .search-results').removeClass('d-none');$('.app-admin-user-search.search-container > .search-results .load-area').nextAll().remove();$('.app-admin-user-search.search-container > .search-results .load-area').addClass('d-block');var dataString={keyword:$(this).val()};app.post("admin/common?indexUserQuickSearch",dataString).done(function(response){if(response.status==="ok"){$('.app-admin-user-search.search-container > .search-results .load-area').removeClass('d-block');$('.app-admin-user-search.search-container > .search-results .load-area').addClass('d-none');$('.app-admin-user-search.search-container > .search-results .load-area').after(response.template);$('.app-admin-user-search.search-container > .search-results .users a > span').replaceText(new RegExp('('+dataString.keyword+')','gi'),'<span class="font-weight-bold">$1</span>')}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('click','.app-admin-user-search.search-container .form-control-clear',function(e){$('.app-admin-user-search.search-container').removeClass('show');$('.app-admin-user-search.search-container > .search-results').addClass('d-none');$('.app-admin-user-search.search-container > .search-results').removeClass('animate');$('.app-admin-user-search.search-container > .search-results').removeClass('fadeIn')});$(document).mouseup(function(e){var container=$(".app-admin-user-search.search-container");if(!container.is(e.target)&&container.has(e.target).length===0){container.removeClass('show');container.find('.search-results').addClass('d-none')}});$(document).on('click','.app-admin-user-search.search-container input[type="text"]',function(e){if($('.app-admin-user-search.search-container > .search-results .load-area').nextAll().length>0){$('.app-admin-user-search.search-container').addClass('show');$('.app-admin-user-search.search-container > .search-results').removeClass('d-none');$('.app-admin-user-search.search-container > .search-results').addClass('animate');$('.app-admin-user-search.search-container > .search-results').addClass('fadeIn')}});$(function(){if($('body[data-template="@ComponentBundle/admin/index"]').length){$('.progress').removeClass('d-none');app.post("admin/common?getVisitorStats",{}).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');var ctx=document.getElementById('appMention_Chart').getContext('2d');new Chart(ctx,{type:'line',data:{labels:response.dates,datasets:[{label:'Ziyaret√ßi',data:[1,2],backgroundColor:['rgb(251 143 32)',],borderColor:['rgb(251 143 32)'],borderWidth:3,}]},options:{responsive:!0,scales:{y:{beginAtZero:!0,grid:{color:'transparent',borderColor:'#a9b6c3'},ticks:{color:'#a9b6c3',stepSize:1}},x:{grid:{color:'#a9b6c3',borderColor:'#a9b6c3'},ticks:{color:'#a9b6c3'}}}}})}})}});$(function(){$("#admin_settings").trackChanges();$("#admin_settings").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();if($("#admin_settings").isChanged()){$('.app-box .progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};$('#admin_settings [name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[name]=$(this).val()});dataString.append('settings',JSON.stringify(optionsArray));app.post("admin/settings?save",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}}).fail(function(xhr,status,err){console.log(status,err)})}}})});$(function(){$('#admin_settings input:file').on("change",function(){var elem=$(this).closest('.app-admin-file-text');var file=$(this).get(0).files[0];$('.app-box .progress').removeClass('d-none');var dataString=new FormData();if(file.size<=0){app.flashMessage(app.phrases.alert_messages.upload_file_is_blank,'warning');$('.app-box .progress').addClass('d-none');return!1}
if(file.size>app.config.settings.admin.max_site_logo_size){app.flashMessage(app.phrases.alert_messages.upload_file_is_too_big,'warning');$('.app-box .progress').addClass('d-none');return!1}
elem.find('input').attr('disabled','disabled');if(elem.find('input[type="text"]').length){elem.find('input[type="text"]').val(file.name);var optionsArray={};elem.find('input[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[name]=$(this).val()});dataString.append('settings',JSON.stringify(optionsArray))}
dataString.append(file.name,file);app.post("admin/common?uploadImage",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');elem.find('input').attr('disabled',!1);if(elem.find('input[name="options[site_logo]"]').length){if(!Storages.cookieStorage.get("night_mode")){$('.navbar-brand > img').attr('src',app.config.settings.public_dir+'/images/'+file.name)}}else if(elem.find('input[name="options[site_logo_night]"]').length){if(Storages.cookieStorage.get("night_mode")){$('.navbar-brand > img').attr('src',app.config.settings.public_dir+'/images/'+file.name)}}
app.flashMessage(app.phrases.alert_messages.saved_successfull)}})})});$(function(){$("#admin_services_edit").validate({submitHandler:function(form,e){e.preventDefault();var elem=$(this.submitButton).closest('.app-service');$('.app-box .progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};elem.find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');if($(this).is(':checkbox')){optionsArray[name]=$(this).is(':checked')}else{optionsArray[name]=$(this).val()}});dataString.append('options',JSON.stringify(optionsArray));dataString.append('service_id',elem.data('service-id'));app.post("admin/oauth?updateService",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(function(){$("#admin_services_new").validate({submitHandler:function(form,e){e.preventDefault();var elem=$(this.submitButton).closest('.app-service');$('.app-box .progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};elem.find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');if($(this).is(':checkbox')){optionsArray[name]=$(this).is(':checked')}else{optionsArray[name]=$(this).val()}});dataString.append('options',JSON.stringify(optionsArray));app.post("admin/oauth?addService",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.service_added_successfull);window.location.replace($('.app-box[data-tab="oauth"] a.back').attr('href'))}else if(response.status==="same_service_is_exist"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.there_is_same_service_exist,'warning')}})}})});$(function(){$("#route_filters_edit").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};$('#route_filters_edit [name^="options"]').each(function(index){var routeName=/\[([a-zA-Z0-9_]+)\]/g.exec($(this).attr('name'))[1];$('#route_filters_edit [name^="options['+routeName+']"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[routeName]={path:{value:$('#route_filters_edit [name="options['+routeName+'][path]"]').val()},controller:{value:$('#route_filters_edit [name="options['+routeName+'][controller]"]').val()}}})});dataString.append('options',JSON.stringify(optionsArray));app.post("admin/route-filters?rebuild",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(document).on('click','[data-template="@ComponentBundle/admin/route_filters"] a.restore',function(e){e.preventDefault();app.post("admin/route-filters?restore",[]).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull);window.location.reload()}})});$(function(){$("#censored_words_edit").validate({submitHandler:function(form,e){e.preventDefault();$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('words',$('#censored_words_edit textarea[name="word_list"]').val());app.post("admin/censor-words?edit",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(document).on('click','[data-template="@ComponentBundle/admin/forums"] [data-forum-id] > a:not(.append-btn)',function(e){e.preventDefault();var elem=$(this);if(elem.closest('[data-forum-id').next('#adminNodeEdit').length<1){$('.app-box .progress').removeClass('d-none')}else{elem.closest('[data-forum-id').next('#adminNodeEdit').collapse('show')}
var dataString={forum_id:$(this).closest('[data-forum-id').data('forum-id')}
if(elem.closest('[data-forum-id').next('#adminNodeEdit').length<1){app.post("admin/forums?showAccordion",dataString).done(function(response){if(response.status==="ok"){elem.closest('[data-forum-id]').after(response.template);elem.closest('[data-forum-id').next('#adminNodeEdit').find('select.selectpicker').selectpicker();elem.closest('[data-forum-id').next('#adminNodeEdit').collapse('show');$('.app-box .progress').addClass('d-none')}})}else{elem.closest('[data-forum-id').next('#adminNodeEdit').collapse('hide')}});$(document).bind('ajaxStop',function(){$('[data-template="@ComponentBundle/admin/forums"] #adminNodeEdit form').each(function(){var elem=$(this).closest('#adminNodeEdit').prev('[data-forum-id]');var formd=$(this).closest('#adminNodeEdit').find('form');var default_parent_id=formd.find('select[name="forum_parent"]').val();formd.trackChanges();$(this).validate({submitHandler:function(form,e){e.preventDefault();if(!formd.isChanged()){return!1}
$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('forum_id',elem.data('forum-id'));dataString.append('parent_id',formd.find('select[name="forum_parent"]').val());dataString.append('forum_title',formd.find('input[name="forum_title"]').val());dataString.append('forum_order',formd.find('input[name="forum_order"]').val());dataString.append('forum_description',formd.find('input[name="forum_description"]').val());app.post("admin/forums?updateNode",dataString,!1,!1).done(function(response){if(response.status==="ok"){app.flashMessage(app.phrases.alert_messages.saved_successfull);$('.app-box .progress').addClass('d-none');elem.find('.title .h5').text(formd.find('input[name="forum_title"]').val());elem.find('.title small').text(formd.find('input[name="forum_description"]').val());if(formd.find('input[name="forum_order"]').val()!=elem.data('order')){window.location.reload()}
elem.attr('data-order',formd.find('input[name="forum_order"]').val());if(default_parent_id!=formd.find('select[name="forum_parent"]').val()){if(formd.find('select[name="forum_parent"]').val()!=0){elem.find('.icon').before('<span class="icon sub"></span>');var clone_node=elem.clone();$('#adminNodeEdit').remove();elem.closest('.list').remove();$('#nodeAccordion').find('[data-forum-id="'+formd.find('select[name="forum_parent"]').val()+'"]').after(clone_node)}else{elem.find('.icon.sub').remove();formd.find('select[name="forum_parent"] option[value="0"]').attr('selected',!0);var clone_node=elem.clone();$('#adminNodeEdit').remove();elem.remove();$('#nodeAccordion').find('.list').after('<div class="setting-group list bg-white text-dark shadow-sm position-relative rounded new"></div>');$('#nodeAccordion').find('.list.new').html(clone_node);$('#nodeAccordion').find('.list.new').removeClass('new')}}}})}})})});$(function(){$("#admin_forums_new").validate({submitHandler:function(form,e){e.preventDefault();var elem=$(this.submitButton).closest('.app-service');$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('parent_id',$('#admin_forums_new select[name="forum_parent"]').val());dataString.append('forum_title',$('#admin_forums_new input[name="forum_title"]').val());dataString.append('forum_order',$('#admin_forums_new input[name="forum_order"]').val());dataString.append('forum_description',$('#admin_forums_new input[name="forum_description"]').val());app.post("admin/forums?addNode",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.forum_added_successfull);window.location.replace($('.app-box[data-tab="forumNew"] a.back').attr('href'))}})}})});$(document).on('click','[data-template="@ComponentBundle/admin/forums"] [data-ui="admin-remove-node"]',function(e){e.preventDefault();e.stopPropagation();var dataString={forum_id:$(this).closest('[data-forum-id]').data('forum-id')};var elem=$(this);$('.app-box .progress').removeClass('d-none');app.post("admin/forums?removeNode",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');if($('#forum-delete[data-forum-id="'+dataString.forum_id+'"]').length<1){$('body').append(response.template);$('#forum-delete[data-forum-id="'+dataString.forum_id+'"]').modal()}else{$('#forum-delete[data-forum-id="'+dataString.forum_id+'"]').modal()}}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).bind('ajaxStop',function(){$('#forum-delete form').each(function(){var forum_id=$(this).closest('#forum-delete').data('forum-id');$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#forum-delete[data-forum-id="'+forum_id+'"]');elem.find('button').attr('disabled',!0);var dataString={forum_id:forum_id};app.post("admin/forums?removeNodeComplete",dataString).done(function(response){if(response.status==="ok"){elem.find('button').addClass('succeeded');elem.find('button').text(elem.find('button').data('complete-text'));elem.find('span.close').click();$('[data-forum-id="'+dataString.forum_id+'"]').closest('.list').remove();app.flashMessage(app.phrases.alert_messages.forum_delete_successfull)}}).fail(function(xhr,status,err){console.log(status,err)})}})})});$(function(){$("#admin_users_new").validate({submitHandler:function(form,e){e.preventDefault();$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('username',$('#admin_users_new input[name="username"]').val());dataString.append('password',$('#admin_users_new input[name="password"]').val());dataString.append('mail',$('#admin_users_new input[name="mail"]').val());dataString.append('title',$('#admin_users_new input[name="title"]').val());dataString.append('role',$('#admin_users_new input[name="role"]').val());app.post("admin/users?new",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.user_added_successfull);window.location.replace($('.app-box[data-tab="userNew"] a.back').attr('href'))}else if(response.status==="user-is-exist"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.user_is_exist,'warning')}})}})});$(function(){$("#admin_users_edit").trackChanges();$("#admin_users_edit").validate({submitHandler:function(form,e){e.preventDefault();if($("#admin_users_edit").isChanged()||$('#admin_users_edit .profile-picture img').data('default')==!0){$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('username',$('#admin_users_edit input[name="username"]').val());if($('#admin_users_edit input[name="password"]').val()){dataString.append('password',$('#admin_users_edit input[name="password"]').val())}
if($('#admin_users_edit input[name="title"]').val()){dataString.append('title',$('#admin_users_edit input[name="title"]').val())}
if($("#admin_users_edit #profile_picture").val()){dataString.append('acs_profile_picture',$("#admin_users_edit #profile_picture").get(0).files[0]);if($("#admin_users_edit #profile_picture").get(0).files[0]>app.config.settings.profile_photo_max_size){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.profile_photo_max_size,'warning');return!1}
$('#admin_users_edit .profile-picture img').attr('data-default',!1)}
if($('#admin_users_edit .profile-picture img').data('default')==!0){dataString.append('profile_picture_ready',$('#admin_users_edit .profile-picture img').data('name'))}
if($('#admin_users_edit input[name="mail"]').val()){dataString.append('mail',$('#admin_users_edit input[name="mail"]').val())}
dataString.append('role',$('#admin_users_edit select[name="role"]').val());dataString.append('user_id',$('#admin_users_edit input[name="user_id"]').val());app.post("admin/users?edit",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.user_edit_successfull);window.location.replace($('.app-box[data-tab="users"] a.back').attr('href'))}}).fail(function(xhr,status,err){console.log(status,err)})}}})});$(document).on('change','[data-template="@ComponentBundle/admin/edit_user"] #profile_picture',function(){var reader=new FileReader();reader.onload=function(e){$('#admin_users_edit .profile-picture > label > img').attr('src',e.target.result)}
reader.readAsDataURL($(this).get(0).files[0])});$(document).on('click','[data-template="@ComponentBundle/admin/edit_user"] [data-ui="remove-pp"]',function(e){e.preventDefault();e.stopPropagation();$(this).closest('.profile-picture').find('img').attr('src',$(this).closest('.profile-picture').data('default'));$(this).closest('.profile-picture').find('img').attr('data-default',!0);$(this).closest('.profile-picture').find('img').attr('data-name','default.svg')});$(function(){$("#admin_users_ban").validate({submitHandler:function(form,e){e.preventDefault();$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('user_id',$('#admin_users_ban input[name="user_id"]').val());dataString.append('expires_in',$('#admin_users_ban input[name="expires_in"]').val());dataString.append('text',$('#admin_users_ban textarea[name="text"]').val());app.post("admin/users?ban",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.user_banned_successfull);window.location.replace($('.app-box[data-tab="users"] a.back').attr('href'))}})}})});$(document).on('click','[data-template="@ComponentBundle/admin/ban_user"] a[data-ui="admin-unban-user"]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');var dataString={ban_id:$(this).closest('.app-banning-flag').data('ban-id')};app.post("admin/users?unban",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.user_unban_successfull);window.location.reload()}})});$(document).on('change','[data-template="@ComponentBundle/admin/addons/list"] [data-ui="addon-switcher"] [type="checkbox"]',function(){$('.app-box .progress').removeClass('d-none');var dataString={addon_name:$(this).closest('.app-addon').data('name')};if(!this.checked){app.post("admin/addons?disableAddon",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.addon_disabled_successfull)}})}else{app.post("admin/addons?activateAddon",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.addon_activated_successfull)}})}});$(function(){if($('[data-template="@ComponentBundle/admin/addons/app"]').length){monaco.languages.registerCompletionItemProvider('php',{provideCompletionItems:function(model,position){var textUntilPosition=model.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:position.lineNumber,endColumn:position.column});var match=textUntilPosition.match(/\$event\-\>container\-\>dom\-\>(?:[a-zA-Z]+)\((.*?)/);if(!match){return{suggestions:[]}}
var word=model.getWordUntilPosition(position);var range={startLineNumber:position.lineNumber,endLineNumber:position.lineNumber,startColumn:word.startColumn,endColumn:word.endColumn};return{suggestions:[{label:'pagecontent',kind:monaco.languages.CompletionItemKind.Function,insertText:'\'{hook:pagecontent}\'',range:range},]}}});var editor=monaco.editor.create(document.getElementById('editor'),{fontSize:'15px',language:'php',value:$('.content').text()})}
$("#admin_addons_app").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();dataString.append('name',$('#admin_addons_app .app-addon').data('app'));dataString.append('content',editor.getValue());app.post("admin/addons?updateApp",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}else if(response.status==="exception-php-parser"){$('.progress').addClass('d-none');$('#php-parser-exception').find('code').text(response.message);$('#php-parser-exception').modal()}})}});$(document).on('click','[data-template="@ComponentBundle/admin/addons/app"] a[data-ui="app-show-originalContent"]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');$('#editor').addClass('d-none');$('.sticky-button').addClass('d-none');$('#originalContent-editor').show();$('#originalContent-editor').addClass('show');if($('#originalContent-editor').html().trim().length<1){var originalModel=monaco.editor.createModel($('.originalContent').text(),'php');var modifiedModel=monaco.editor.createModel(editor.getValue(),'php');var diffEditor=monaco.editor.createDiffEditor(document.getElementById('originalContent-editor'),{enableSplitViewResizing:!1,renderSideBySide:!1,fontSize:'15px'});diffEditor.setModel({original:originalModel,modified:modifiedModel})}
$(this).addClass('d-none');$(this).next().removeClass('d-none');$('.app-box .progress').addClass('d-none')});$(document).on('click','[data-template="@ComponentBundle/admin/addons/app"] a[data-ui="app-show-content"]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');$('#editor').removeClass('d-none');$('.sticky-button').removeClass('d-none');$('#originalContent-editor').remove();$('.originalContent').after('<div id="originalContent-editor"></div>');$(this).addClass('d-none');$(this).prev().removeClass('d-none');$('.app-box .progress').addClass('d-none')})});$(function(){$("#admin_addons_install").trackChanges();$("#admin_addons_install").validate({submitHandler:function(form,e){e.preventDefault();if($("#admin_addons_install").isChanged()){$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('archive',$("#admin_addons_install input#file").get(0).files[0]);app.post("admin/addons?install",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull);window.location.replace($('.app-box[data-tab="addons"] a.back').attr('href'))}})}}})});$(function(){$("#admin_attchfiletypes_edit").validate({submitHandler:function(form,e){e.preventDefault();var elem=$(this.submitButton).closest('.app-attachment-filetypes');$('.app-box .progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};elem.find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');if($(this).is(':checkbox')){optionsArray[name]=$(this).is(':checked')}else{optionsArray[name]=$(this).val()}});dataString.append('options',JSON.stringify(optionsArray));dataString.append('type_id',elem.data('type-id'));app.post("admin/attachments?updateFileTypes",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(function(){$("#admin_attchfiletypes_new").validate({submitHandler:function(form,e){e.preventDefault();var elem=$(this.submitButton).closest('.app-attachment-filetypes');$('.app-box .progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};elem.find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');if($(this).is(':checkbox')){optionsArray[name]=$(this).is(':checked')}else{optionsArray[name]=$(this).val()}});dataString.append('options',JSON.stringify(optionsArray));app.post("admin/attachments?createFileType",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull);window.location.replace($('.app-box[data-tab="attachments.new_file_type"] a.back').attr('href'))}})}})});$(function(){if($('[data-template="@ComponentBundle/admin/theme/editor"]').length){var editor=monaco.editor.create(document.getElementById('editor'),{fontSize:'15px',language:'less',value:$('.content').text()});$(document).on('change','.js-AppAdmin_ThemeStyleSelector select',function(){$('.app-box .progress').removeClass('d-none');var dataString={file:$(this).val()};app.post("admin/theme?getCss",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');$('.app-style-editor').find('.head-title > span').text(dataString.file);editor.setValue(response.content);editor.setScrollPosition({scrollTop:0})}})});$("#admin_theme_editor").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();dataString.append('name',$('.js-AppAdmin_ThemeStyleSelector select').val());dataString.append('content',editor.getValue());app.post("admin/theme?updateCssFile",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})}});$(function(){$(document).on('click','.directory-list li.folder > span',function(e){if($(this).hasClass('active')){$(this).next('ul').addClass('d-none');$(this).removeClass('active')}else{if($(this).closest('.folder').closest('.folder').length){$(this).closest('ul').removeClass('d-none');$(this).closest('ul').closest('ul').prev('span').addClass('active');$(this).addClass('active')}
$(this).next('ul').removeClass('d-none');$(this).addClass('active')}})});$(function(){if($('[data-template="@ComponentBundle/admin/theme/templates/editor"]').length){var editor=monaco.editor.create(document.getElementById('editor'),{fontSize:'15px',language:'twig'});$(document).on('click','.directory-list li:not(.folder) > span',function(e){var elem=$(this);$('.app-box .progress').removeClass('d-none');var dataString={template:$(this).data('template'),file:$(this).data('path')};app.post("admin/templates?getTemplate",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');$('.app-template-editor').find('.head-title > span').text(dataString.template);$('.directory-list li:not(.folder) > span').removeClass('active');elem.addClass('active');editor.setValue(response.content);editor.setScrollPosition({scrollTop:0});if(response.originalContent){$('.app-template-editor').find('.head-title').next().removeClass('d-none');$('#originalContent-editor').after('<div class="originalContent d-none"></div>');$('.originalContent').text(response.originalContent)}else{if(!$('.app-template-editor').find('.head-title').next().hasClass('d-none')){$('.app-template-editor').find('.head-title').next().addClass('d-none')}
$('.originalContent').remove()}
window.history.pushState(null,null,app.config.settings.admin_url+'/templates?path=['+dataString.file+']')}})});$("#admin_template_editor").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();dataString.append('name',$('.js-AppAdmin_TemplateSelector .directory-list span.active:not(.folder-name)').data('template'));dataString.append('path',$('.js-AppAdmin_TemplateSelector .directory-list span.active:not(.folder-name)').data('path'));dataString.append('content',editor.getValue());app.post("admin/templates?updateTemplate",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}else if(response.status==="exception-twig-syntax"){$('.progress').addClass('d-none');$('#twig-syntax-exception').find('code').text(response.message);$('#twig-syntax-exception').modal()}})}});var templateName_regex=/path=\[(.*?)\.tpl\]$/g;if(window.location.href.match(templateName_regex)){var templateName_id=templateName_regex.exec(window.location.href);$('.js-AppAdmin_TemplateSelector .directory-list span[data-path="'+templateName_id[1]+'.tpl"]').click();$('.js-AppAdmin_TemplateSelector .directory-list span[data-path="'+templateName_id[1]+'.tpl"]').closest('ul').prev('span').click()}else{$('.js-AppAdmin_TemplateSelector .directory-list span[data-path="'+$('.js-AppAdmin_TemplateSelector').data('default')+'"]').click();$('.js-AppAdmin_TemplateSelector .directory-list span[data-path="'+$('.js-AppAdmin_TemplateSelector').data('default')+'"]').closest('ul').prev('span').click()}
$(document).on('click','[data-template="@ComponentBundle/admin/theme/templates/editor"] a[data-ui="app-show-originalContent"]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');$('#editor').addClass('d-none');$('.sticky-button').addClass('d-none');$('#originalContent-editor').show();$('#originalContent-editor').addClass('show');if($('#originalContent-editor').html().trim().length<1){var originalModel=monaco.editor.createModel($('.originalContent').text(),'twig');var modifiedModel=monaco.editor.createModel(editor.getValue(),'twig');var diffEditor=monaco.editor.createDiffEditor(document.getElementById('originalContent-editor'),{enableSplitViewResizing:!1,renderSideBySide:!1,fontSize:'15px'});diffEditor.setModel({original:originalModel,modified:modifiedModel})}
$(this).addClass('d-none');$(this).next().removeClass('d-none');$('.app-box .progress').addClass('d-none')});$(document).on('click','[data-template="@ComponentBundle/admin/theme/templates/editor"] a[data-ui="app-show-content"]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');$('#editor').removeClass('d-none');$('.sticky-button').removeClass('d-none');$('#originalContent-editor').remove();$('.originalContent').after('<div id="originalContent-editor"></div>');$(this).addClass('d-none');$(this).prev().removeClass('d-none');$('.app-box .progress').addClass('d-none')})}});$(document).on('click','.input-callback > .js-ClickableDivs',function(e){$(this).addClass('d-none');$(this).prev('input').removeClass('text-transparent');$(this).closest('.input-callback').find('input').focus().val($(this).closest('.input-callback').find('input').val())});$(function(){$(".js-AppAdmin_QuickSearchForums input").on("keyup click input",function(){if(this.value.length>0){var value=$(this).val().toLowerCase();$("#nodeAccordion .nested-items > .title").filter(function(){$("#adminNodeEdit").remove();return $(this).closest('.nested-items').toggle($(this).text().toLowerCase().indexOf(value)>-1)})}else{$("#nodeAccordion .nested-items").show()}});$(".js-AppAdmin_QuickSearchForums").find(".form-control-clear").click(function(){$("#nodeAccordion .nested-items").show()});$(".js-AppAdmin_QuickSearchAddons input").on("keyup click input",function(){if(this.value.length>0){var value=$(this).val().toLowerCase();$("#servicesAccordion .head-title > span").filter(function(){return $(this).closest('.app-addon').toggle($(this).text().toLowerCase().indexOf(value)>-1)})}else{$("#servicesAccordion .app-addon").show()}});$(".js-AppAdmin_QuickSearchAddons").find(".form-control-clear").click(function(){$("#servicesAccordion .app-addon").show()});$(".js-AppAdmin_QuickSearchLanguage_Phrases input").on("keyup click input",function(){if(this.value.length>0){var value=$(this).val().toLowerCase();$(".app-language-phrase .head-title").filter(function(){var phrase=$(this).find('.phrase').text();var text=$(this).find('.text').text();var regex=new RegExp(value,'ig');text=text.replace(regex,(match,$1)=>{return'<span class="font-weight-bold">'+match+'</span>'});phrase=phrase.replace(regex,(match,$1)=>{return'<span class="font-weight-bold">'+match+'</span>'});$(this).find('.phrase').html(phrase);$(this).find('.text').removeClass('d-none');$(this).find('.text').html(text);return $(this).closest('.app-language-phrase').toggle($(this).text().toLowerCase().indexOf(value)>-1)})}else{$(".app-language-phrase .head-title").find('.text').addClass('d-none');$(".app-language-phrase .head-title .phrase").each(function(){$(this).html($(this).data('text'))});$(".app-language-phrase").show()}});$(".js-AppAdmin_QuickSearchLanguage_Phrases").find(".form-control-clear").click(function(){$(".app-language-phrase .head-title").find('.text').addClass('d-none');$(".app-language-phrase .head-title .phrase").each(function(){$(this).html($(this).data('text'))});$(".app-language-phrase").show()})});$(document).on('change','[data-template="@ComponentBundle/admin/languages/list"] [data-ui="language-switcher"] [type="checkbox"]',function(){$('.app-box .progress').removeClass('d-none');var elem=$(this);var dataString={name:$(this).closest('.app-language').find('[data-language-id]').data('language-id')};if(!this.checked){$(this).prop('checked',!0);$('.app-box .progress').addClass('d-none')}else{app.post("admin/languages?changeDefaultLanguage",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');elem.closest('.app-language-list').find('[type="checkbox"]').prop('checked',!1);elem.prop('checked',!0);app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}});$(function(){$("#admin_languages_edit").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};$("#admin_languages_edit").find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[name]=$(this).val()});dataString.append('options',JSON.stringify(optionsArray));dataString.append('language_id',$('.app-language').data('name'));app.post("admin/languages?edit",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');console.log(response.data);app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(function(){$("#admin_phrase_edit").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();dataString.append('language',$('.app-phrase').data('language'));dataString.append('phrase',$('.app-phrase').data('phrase'));dataString.append('text',$('#admin_phrase_edit').find('textarea[name="text"]').val());app.post("admin/languages?editPhrase",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');console.log(response.data);app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(function(){if($('[data-template="@ComponentBundle/admin/languages/sentences"]').length){$(document).on('click','.directory-list li:not(.folder) > span',function(e){var elem=$(this);$('.app-box .progress').removeClass('d-none');var dataString={connectLanguage:$(this).data('language'),language:$(this).data('file'),file:$(this).data('path')};app.post("admin/languages?getLanguage",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');$('.js-AppAdmin_LanguagesSentence_List .app-phrase-search').nextAll().remove();$('.js-AppAdmin_LanguagesSentence_List .app-phrase-search').after(response.template);$('.directory-list li:not(.folder) > span').removeClass('active');elem.addClass('active');window.history.pushState(null,null,app.config.settings.admin_url+'/languages?sentences&path=['+dataString.file+']')}})});var languageName_regex=/path=\[(.*?)\.yaml\]$/g;if(window.location.href.match(languageName_regex)){var languageName_id=languageName_regex.exec(window.location.href);$('.js-AppAdmin_LanguagesSentence .directory-list span[data-path="'+languageName_id[1]+'.yaml"]').click();$('.js-AppAdmin_LanguagesSentence .directory-list span[data-path="'+languageName_id[1]+'.yaml"]').closest('ul').prev('span').click()}else{$('.js-AppAdmin_LanguagesSentence .directory-list span[data-path="'+$('.js-AppAdmin_LanguagesSentence_List').data('default')+'"]').click();$('.js-AppAdmin_LanguagesSentence .directory-list span[data-path="'+$('.js-AppAdmin_LanguagesSentence_List').data('default')+'"]').closest('ul').prev('span').click()}}});$(function(){$(document).on('click','.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectLanguages [data-language]',function(e){e.preventDefault();$('.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectLanguages [data-language]').removeClass('active');$(this).addClass('active');if($(this).data('language')!=='__default'){$(this).closest('.dropdown-menu').prev('button').html($(this).find('.text').html());$(this).closest('.dropdown-menu').prev('button').removeClass('icon').removeClass('languages')}else{$(this).closest('.dropdown-menu').prev('button').html($(this).find('.text').text());$(this).closest('.dropdown-menu').prev('button').addClass('icon').addClass('languages')}});$(document).on('click','.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectAddon [data-addon]',function(e){e.preventDefault();$('.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectAddon [data-addon]').removeClass('active');$(this).addClass('active');if($(this).data('addon')!=='__default'){$(this).closest('.dropdown-menu').prev('button').html($(this).find('.text').text());$(this).closest('.dropdown-menu').prev('button').removeClass('icon').removeClass('addons');$(this).closest('.dropdown-menu').prev('button').addClass('icon').addClass('puzzle')}else{$(this).closest('.dropdown-menu').prev('button').html($(this).find('.text').text());$(this).closest('.dropdown-menu').prev('button').removeClass('icon').removeClass('puzzle');$(this).closest('.dropdown-menu').prev('button').addClass('icon').addClass('addons')}});function searchSentences(){$('.app-box .progress').removeClass('d-none');var dataString={language:$('.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectLanguages [data-language].active').data('language'),addon:$('.js-AppAdmin_QuickSearchSentences .app-searchSentences-selectAddon [data-addon].active').data('addon'),query:$('.js-AppAdmin_QuickSearchSentences input').val()};app.post("admin/languages?searchAdv",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');$('.app-sentenceList').html(response.template);$('.app-sentenceList').find('span.fi[data-language]').each(function(index,domEle){$(this).addClass('fi-'+$('.app-searchSentences-selectLanguages [data-language="'+$(this).data('language')+'"]').data('flag')).addClass('--xs')});$('.app-sentenceList .text').each(function(index,domEle){var text=$(this).text();var regex=new RegExp($('.js-AppAdmin_QuickSearchSentences input').val(),'ig');text=text.replace(regex,(match,$1)=>{return'<span class="font-weight-bold">'+match+'</span>'});$(this).html(text)})}})};$(document).on('click','.js-AppAdmin_QuickSearchSentences .input-group-append button',function(e){e.preventDefault();if($('.js-AppAdmin_QuickSearchSentences input').val().length>0){return searchSentences()}});$(document).on('keypress','.js-AppAdmin_QuickSearchSentences input',function(e){if(e.which==13){e.preventDefault();if($('.js-AppAdmin_QuickSearchSentences input').val().length>0){return searchSentences()}}});$(document).on('click','.js-AppAdmin_QuickSearchSentences .form-control-clear',function(e){$('.app-sentenceList').html('')})});$(function(){$(document).on('click','.app-newLanguage-selectMain [data-language]',function(e){e.preventDefault();$('.app-box .progress').removeClass('d-none');$('.app-newLanguage-selectMain [data-language]').removeClass('active');$(this).addClass('active');var dataString={language:$(this).data('language'),};app.post("admin/languages?duplicateLanguageInit",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');$('#admin_languages_new').find('input[name="options[dir]"]').val(response.data.text_direction);$('#admin_languages_new').find('select[name="options[zone]"] option[value="'+response.data.timer.zone+'"]').attr('selected','selected');$('#admin_languages_new').find('input[name="options[format]"]').val(response.data.timer.format);$('#admin_languages_new').find('input[name="options[date_format]"]').val(response.data.timer.date_format);$('#admin_languages_new').find('input[name="options[date_format_simple]"]').val(response.data.timer.date_format_simple);$('#admin_languages_new').find('input[name="options[year_format]"]').val(response.data.timer.year_format);app.flashMessage($('.app-language-new').find('.js-AppAdmin_SelectedMainLanguageMessage span').html(function(i,html){return html.replace('{1}',response.data.title)}).html())}})})});$(function(){$("#admin_languages_new").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};$("#admin_languages_new").find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[name]=$(this).val()});if($('.app-newLanguage-selectMain [data-language].active').length>0){dataString.append('copyLanguageName',$('.app-newLanguage-selectMain [data-language].active').data('language'))}else{dataString.append('copyLanguageName',"Turkish")}
dataString.append('options',JSON.stringify(optionsArray));app.post("admin/languages?create",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull);window.location.replace($('.app-box[data-tab="languages"] a.back').attr('href'))}})}})});$(document).on('click','[data-template="@ComponentBundle/admin/languages/list"] [data-ui="admin-remove-language"]',function(e){e.preventDefault();e.stopPropagation();if($(this).closest('[data-language-id]').find('[data-ui="language-switcher"] input').is(':checked')){app.flashMessage(app.phrases.alert_messages.language_remove_default_error,'warning');return!1}
var dataString={language:$(this).closest('[data-language-id]').data('language-id')};var elem=$(this);$('.app-box .progress').removeClass('d-none');app.post("admin/languages?remove",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');if($('#language-delete[data-language-id="'+dataString.language+'"]').length<1){$('body').append(response.template);$('#language-delete[data-language-id="'+dataString.language+'"]').modal()}else{$('#language-delete[data-language-id="'+dataString.language+'"]').modal()}}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).bind('ajaxStop',function(){$('#language-delete form').each(function(){var language_id=$(this).closest('#language-delete').data('language-id');$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#language-delete[data-language-id="'+language_id+'"]');elem.find('button').attr('disabled',!0);var dataString={language_id:language_id};app.post("admin/languages?removeLanguageComplete",dataString).done(function(response){if(response.status==="ok"){elem.find('button').addClass('succeeded');elem.find('button').text(elem.find('button').data('complete-text'));elem.find('span.close').click();$('[data-language-id="'+dataString.language_id+'"]').closest('.list').remove();app.flashMessage(app.phrases.alert_messages.saved_successfull)}}).fail(function(xhr,status,err){console.log(status,err)})}})})});$(function(){$("#admin_language_install").trackChanges();$("#admin_language_install").validate({submitHandler:function(form,e){e.preventDefault();if($("#admin_language_install").isChanged()){$('.app-box .progress').removeClass('d-none');var dataString=new FormData();dataString.append('archive',$("#admin_language_install input#file").get(0).files[0]);app.post("admin/languages?install",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull);window.location.replace($('.app-box[data-tab="languages"] a.back').attr('href'))}else if(response.status==="language-is-exist"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.language_is_exist,"warning")}})}}})});$(function(){if($('[data-template="@ComponentBundle/admin/editor/buttons"]').length){var nestedSortables=[].slice.call(document.querySelectorAll('#toolbars #js-AppAdmin_DraggableItems .parent'));for(var i=0;i<nestedSortables.length;i++){new Sortable(nestedSortables[i],{group:'nested',animation:150,fallbackOnBody:!0,swapThreshold:0.65,selectedClass:'selected',filter:'.non-draggable',onEnd:function(evt){var parents={};$("#js-AppAdmin_DraggableItems .parent > [data-parent]").each(function(index){var parent=$(this).data("parent");$('#js-AppAdmin_DraggableItems .parent > [data-parent="'+parent+'"]').removeClass('group-line');if(parents.hasOwnProperty(parent)===!1){$('#js-AppAdmin_DraggableItems .parent > [data-parent="'+parent+'"]').last().addClass('group-line')}
$(this).attr('data-order',(index+1))})},handle:'[data-toggle="dropdown"]'})}
var parents={};$("#toolbars #js-AppAdmin_DraggableItems .parent > [data-parent]").each(function(index){var parent=$(this).data("parent");if(parents.hasOwnProperty(parent)===!1){$('#js-AppAdmin_DraggableItems .parent > [data-parent="'+parent+'"]').last().addClass('group-line')}
$(this).attr('data-order',(index+1))});$("#toolbars #js-AppAdmin_DraggableItems .dropdown-menu").each(function(index){var cloneDropdownMenu=$(this).clone();cloneDropdownMenu.removeClass('d-none');$(this).prev('.dropdown').find('button').after(cloneDropdownMenu);$(this).remove()})}});$(document).on('click','[data-template="@ComponentBundle/admin/editor/buttons"] .tab-content #toolbars button[data-ui="save-order"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this).closest('#toolbars');$('.app-box .progress').removeClass('d-none');var ActiveToolbars={};$('.tab-content #toolbars .active-toolbars [data-id]').each(function(index){ActiveToolbars[$(this).data('id')]=(index+1)});var DisableToolbars={};$('.tab-content #toolbars .nonactive-toolbars [data-id]').each(function(index){DisableToolbars[$(this).data('id')]=(index+1)});var dataString={activeToolbars:ActiveToolbars,disableToolbars:DisableToolbars};app.post("admin/editor?toolbarConfig",dataString).done(function(response){if(response.status==="ok"){$('.app-box .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})});$(function(){$('#toolbars .dropdown-menu form').each(function(){var toolbar_id=$(this).closest('[data-id]').data('id');$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#toolbars .parent [data-id="'+toolbar_id+'"]');elem.find('.progress').removeClass('d-none');var dataString=new FormData();var optionsArray={};elem.find('[name^="options"]').each(function(index){var name=$(this).attr('name').split('[').pop().replace(']','');optionsArray[name]=$(this).val()});dataString.append('options',JSON.stringify(optionsArray));dataString.append('toolbar_id',toolbar_id);app.post("admin/editor?toolbarEdit",dataString,!1,!1).done(function(response){if(response.status==="ok"){elem.find('.progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})})});$(function(){$("#admin_buttons_edit").validate({submitHandler:function(form,e){e.preventDefault();$('.progress').removeClass('d-none');var dataString=new FormData();dataString.append('tag',$('#admin_buttons_edit').find('input[name="tag"]').val());dataString.append('content',$('#admin_buttons_edit').find('textarea[name="replace_text"]').val());dataString.append('bbcode',$('#admin_buttons_edit').find('input[name="bbcode"]').val());dataString.append('is_active',$('#admin_buttons_edit').find('input[name="is_active"]').is(':checked')?1:0);dataString.append('toolbar_name',$('#admin_buttons_edit').find('input[name="toolbar_name"]').val());dataString.append('toolbar_button',$('#admin_buttons_edit').find('input[name="toolbar_button"]').val());dataString.append('toolbar_icon',$('#admin_buttons_edit').find('textarea[name="toolbar_icon"]').val());dataString.append('toolbar_order_by',$('#admin_buttons_edit').find('input[name="toolbar_order_by"]').val());dataString.append('toolbar_id',$('#admin_buttons_edit').find('input[name="toolbar_id"]').val());dataString.append('button_id',$('#admin_buttons_edit').find('input[name="button_id"]').val());app.post("admin/editor?buttonEdit",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.progress').addClass('d-none');console.log(response.data);app.flashMessage(app.phrases.alert_messages.saved_successfull)}})}})});$(function(){if($('.sticky-button').length){$('.sticky-button').width($('.sticky-button').closest('form').width())}
if($('.app-box').height()>='1000'){$('.sticky-button').addClass('is-sticky')}});$(function(){$('.datepicker').datepicker({autoclose:!0,startDate:'0',}).datepicker("setDate",new Date())});$(function(){if(typeof monaco!=="undefined"){if(Storages.cookieStorage.get("night_mode")){monaco.editor.setTheme('vs-dark')}else{monaco.editor.setTheme('vs')}
$('.app-theme-mode').on('click',function(){if($('.app-theme-mode input').is(':checked')){monaco.editor.setTheme('vs-dark')}else{monaco.editor.setTheme('vs')}})}})}(window.jQuery,window,document)