var app={};(function(context){context.post=function(url,data,processData=!0,contentType="application/x-www-form-urlencoded"){var promise=$.ajax({url:app.config.settings.ajax_path+"/"+url,type:"post",data:data,dataType:"JSON",processData:processData,contentType:contentType}).done(function(responseData,status,xhr){}).fail(function(xhr,status,err){});return promise};context.scrollTopAnchor=function(target){$('html, body').animate({scrollTop:(target.offset().top)},500);$(target).addClass('highlight');setTimeout(function(){$(target).removeClass('highlight')},1000)};context.editorConfig=function(id,style='default'){if(typeof app.visitor=='undefined'){return!1}
if(Storages.cookieStorage.get("night_mode")||style=='dark'){var theme='oxide-dark';var content_theme='dark'}else{var theme='oxide';var content_theme='default'}
if(app.config.settings.emoticon_database=='local'){twemoji.base=app.config.settings.public_dir+'/images/emoticons';twemoji.size=''}else if(app.config.settings.emoticon_database=='twemoji'){twemoji.base='https://twemoji.maxcdn.com/v/latest/';twemoji.size='72x72'}
twemoji.className='js-Twemoji_MentionEditor';app.setupEditorLanguage();tinymce.init({selector:id,skin:"oxide",skin_url:app.config.settings.public_dir+"/vendor/tinymce/skins/ui/"+theme,content_css:app.config.settings.public_dir+"/vendor/tinymce/skins/content/"+content_theme+"/content.min.css",content_style:".mce-content-body[data-mce-placeholder]:not(.mce-visualblocks)::before { color: rgb(150 150 150); } p {margin:0; padding: 0;} img.js-Twemoji_MentionEditor { width: 22px; height: 22px; vertical-align: text-bottom; } .mce-content-body [data-mce-selected=inline-boundary] { color: #000; }",language:'app_EditorLanguage',plugins:"bbcodeCustom code autoresize imagetools autolink link image customEmoticons lists codesample media table autosave userTagging spoiler quoteMessage paste",toolbar:app.setupEditorToolbars(),invalid_elements:"div",paste_webkit_styles:"font-size color",menubar:!1,statusbar:!1,min_height:230,max_height:400,autosave_interval:"30s",autosave_ask_before_unload:!1,autosave_restore_when_empty:!0,file_picker_types:'image',file_picker_callback:app.editorFilePickerCallback(),relative_urls:!1,remove_script_host:!1,convert_urls:!0,placeholder:app.phrases.editor_placeholder,codesample_languages:[{text:'HTML/XML',value:'markup'},{text:'JavaScript',value:'javascript'},{text:'CSS',value:'css'},{text:'PHP',value:'php'},{text:'Twig',value:'twig'},{text:'Ruby',value:'ruby'},{text:'Python',value:'python'},{text:'Java',value:'java'},{text:'C',value:'c'},{text:'C#',value:'csharp'},{text:'C++',value:'cpp'}],codesample_global_prismjs:!0,entity_encoding:"raw",setup:function(editor){$.each(app.setupEditorButtons(),function(i,item){var content=item.bbcode;editor.ui.registry.addButton(item.title,{icon:item.title,tooltip:item.title,onAction:function(_){editor.insertContent('\n'+content.replace('{content}',editor.selection.getContent())+'\n')}})});$.each(app.setupEditorToolbarIcons(),function(i,item){editor.ui.registry.addIcon(item.name,item.icon)});editor.on('init',function(e){$('.tox-tbtn').tooltip({boundary:'window',trigger:'hover'});$('.tox-split-button').tooltip({boundary:'window',trigger:'hover'})})},})};context.setupEditorLanguage=function(){try{var lang=$.parseJSON($('.app_EditorLanguage').first().html())||{}}catch(e){var lang={};console.error('Editor language could not be loaded. The default language is English.')}
tinymce.addI18n('app_EditorLanguage',lang)};context.setupEditorToolbars=function(){try{var toolbars=$.parseJSON($('.app_EditorToolbars').first().html()).toolbars||{}}catch(e){var toolbars={};console.error('Editor toolbars could not be loaded.')}
return toolbars};context.setupEditorButtons=function(){try{var buttons=$.parseJSON($('.app_EditorButtons').first().html()).buttons||{}}catch(e){var buttons={}}
return buttons};context.setupEditorToolbarIcons=function(){try{var icons=$.parseJSON($('.app_EditorToolbarIcons').first().html()).icons||{}}catch(e){var icons={}}
return icons};context.editorFilePickerCallback=function(){return function(cb,value,meta){var input=document.createElement('input');input.setAttribute('type','file');input.setAttribute('accept',app.config.settings.editor.image_filepicker_types);input.onchange=function(){var file=this.files[0];var reader=new FileReader();var fd=new FormData();var files=file;fd.append('filetype',meta.filetype);fd.append("file",files);var filename="";var xhr,formData;xhr=new XMLHttpRequest();xhr.withCredentials=!1;xhr.open('POST',app.config.settings.site_url+"/attachments/editor-image-upload");xhr.onload=function(){var json;if(xhr.status!=200){alert('HTTP Error: '+xhr.status);return}
json=JSON.parse(xhr.responseText);if(!json||typeof json.location!='string'){alert('Invalid JSON: '+xhr.responseText);return}
filename=json.location;reader.onload=function(e){cb(filename)};reader.readAsDataURL(file)};xhr.send(fd);return};input.click()}};context.getStats=function(id){var body=tinymce.get(id).getBody(),text=tinymce.trim(body.innerText||body.textContent);return{chars:text.length,words:text.split(/[\w\u2019\'-]+/).length}};context.flashMessage=function(text,type='info'){if(type==='info'){$('.app-alert-container').removeClass('alert-login');var time=3000}else if(type==='warning'){$('.app-alert-container').addClass('alert-login');var time=5000}
$('.app-alert-container > .app-alert > span').html(text);$(".app-alert-container > .app-alert").slideDown('fast');setTimeout(function(){$('.app-alert-container > .app-alert').slideUp("fast")},time)};context.reactionBox=function(){if($(".like-button").length){$(".like-button").hover(function(){$(this).find(".reaction-box").fadeIn(100,function(){$(this).find(".reaction-icon").each(function(i,e){setTimeout(function(){$(e).addClass("show")},i*80)})})},function(){setTimeout(function(){$(".reaction-box").fadeOut(200,function(){$(this).find(".reaction-icon").removeClass("show")})},100)})}};context.twitterApi=function(){if($('body[data-template="discussion"] .bbWrapper_twitter:not(.loaded)').length){$('.bbWrapper_twitter:not(.loaded)').each(function(){var elem=$(this);var tweet=$(this).find('#tweet');var id=tweet.data("tweet-id");if(Storages.cookieStorage.get("night_mode")){var theme='dark'}else{var theme='light'}
$(this).closest('.app-post').find('.progress').removeClass('d-none');$.getScript("https://platform.twitter.com/widgets.js",function(data,textStatus,jqxhr){twttr.widgets.createTweet(id,tweet.get(0),{conversation:'all',cards:'visible',linkColor:'#cc0000',theme:theme}).then(function(el){});twttr.ready(function(twttr){twttr.events.bind('rendered',function(event){elem.closest('.app-post').find('.progress').addClass('d-none')})})});$(this).addClass('loaded')})}};context.getPath=function(removeSlash=!1){return window.location.pathname};context.removeEditorDraft=function(){Storages.localStorage.remove('tinymce-autosave-'+app.getPath(!0)+'-post-editor-draft');Storages.localStorage.remove('tinymce-autosave-'+app.getPath(!0)+'-post-editor-time')};context.initTooltip=function(){$('img:not(.user-status, .js-Twemoji_MentionEditor, .no-tooltip)').tooltip({container:'.app-page-content'});$('a:not(.app-share-button, .no-tooltip)').tooltip({container:'.app-page-content'});$('.toggle-tooltip:not(.app-share-button, .no-tooltip)').tooltip({container:'.app-page-content'});$('img.js-Twemoji_MentionEditor').tooltip({container:'.app-page-content',title:function(){return"<div class=\"d-flex align-items-center\"><img src=\""+$(this).attr('src')+"\" /><div class=\"ml-3\"><span>"+$(this).data('shortcut')+"<a href=\"#\" class=\"copy\" title=\""+app.phrases.copy+"\"></a></span><span>"+$(this).data('title')+"</span></div></div>"},template:'<div class="tooltip tooltipEmojiBox" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',boundary:'window',trigger:'manual',html:!0,offset:'0'}).on("mouseenter",function(){var _this=this;$(_this).tooltip('show');$(".tooltipEmojiBox").on("mouseleave",function(){$(_this).tooltip('hide')})}).on("mouseleave",function(){var _this=this;setTimeout(function(){if(!$(".tooltipEmojiBox:hover").length){$(_this).tooltip('hide')}},100)});$('img.user-status.online.no-tooltip').tooltip({container:'.app-page-content',template:'<div class="tooltip user-status-online" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'});$('img.user-status.offline.no-tooltip').tooltip({container:'.app-page-content',template:'<div class="tooltip user-status-offline" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'})};context.isMobile=function(){var isMobile=!1;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))){isMobile=!0}
return isMobile}})(app);if(window.jQuery===undefined)jQuery=$={};!(function($,window,document){"use strict";$.fn.extend({isChanged:function(){return this.data("changed")},trackChanges:function(){$(":input",this).change(function(){$(this.form).data("changed",!0)})},alterClass:function(removals,additions){var self=this;if(removals.indexOf("*")===-1){self.removeClass(removals);return!additions?self:self.addClass(additions)}
var patt=new RegExp("\\s"+removals.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");self.each(function(i,it){var cn=" "+it.className+" ";while(patt.test(cn)){cn=cn.replace(patt," ")}
it.className=$.trim(cn)});return!additions?self:self.addClass(additions)},isOnScreen:function(){var win=$(window);var viewport={top:win.scrollTop(),left:win.scrollLeft(),};viewport.right=viewport.left+win.width();viewport.bottom=viewport.top+win.height();var bounds=this.offset();bounds.right=bounds.left+this.outerWidth();bounds.bottom=bounds.top+this.outerHeight();return!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom)},donetyping:function(callback,timeout){timeout=timeout||1e3;var timeoutReference,doneTyping=function(el){if(!timeoutReference)return;timeoutReference=null;callback.call(el)};return this.each(function(i,el){var $el=$(el);$el.is(":input")&&$el.on("keyup keypress paste",function(e){if(e.type=="keyup"&&e.keyCode!=8)return;if(timeoutReference)clearTimeout(timeoutReference);timeoutReference=setTimeout(function(){doneTyping(el)},timeout)}).on("blur",function(){doneTyping(el)})})},stickySidebar:function(options){var defaults={containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,updateSidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",};options=$.extend(defaults,options);options.additionalMarginTop=parseInt(options.additionalMarginTop)||0;options.additionalMarginBottom=parseInt(options.additionalMarginBottom)||0;tryInitOrHookIntoEvents(options,this);function tryInitOrHookIntoEvents(options,$that){var success=tryInit(options,$that);if(!success){console.log("TST: Body width smaller than options.minWidth. Init is delayed.");$(document).scroll((function(options,$that){return function(evt){var success=tryInit(options,$that);if(success){$(this).unbind(evt)}}})(options,$that));$(window).resize((function(options,$that){return function(evt){var success=tryInit(options,$that);if(success){$(this).unbind(evt)}}})(options,$that))}}
function tryInit(options,$that){if(options.initialized===!0){return!0}
if($("body").width()<options.minWidth){return!1}
init(options,$that);return!0}
function init(options,$that){options.initialized=!0;$("head").append($('<style>.StickySidebar:after {content: ""; display: table; clear: both;}</style>'));$that.each(function(){var o={};o.sidebar=$(this);o.options=options||{};o.container=$(o.options.containerSelector);if(o.container.length==0){o.container=o.sidebar.parent()}
o.sidebar.parents().css("-webkit-transform","none");o.sidebar.css({position:"relative",overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box",});o.stickySidebar=o.sidebar.find(".StickySidebar");if(o.stickySidebar.length==0){o.sidebar.find("script").remove();o.stickySidebar=$("<div>").addClass("StickySidebar").append(o.sidebar.children());o.sidebar.append(o.stickySidebar)}
o.marginTop=parseInt(o.sidebar.css("margin-top"));o.marginBottom=parseInt(o.sidebar.css("margin-bottom"));o.paddingTop=parseInt(o.sidebar.css("padding-top"));o.paddingBottom=parseInt(o.sidebar.css("padding-bottom"));var collapsedTopHeight=o.stickySidebar.offset().top;var collapsedBottomHeight=o.stickySidebar.outerHeight();o.stickySidebar.css("padding-top",1);o.stickySidebar.css("padding-bottom",1);collapsedTopHeight-=o.stickySidebar.offset().top;collapsedBottomHeight=o.stickySidebar.outerHeight()-collapsedBottomHeight-collapsedTopHeight;if(collapsedTopHeight==0){o.stickySidebar.css("padding-top",0);o.stickySidebarPaddingTop=0}else{o.stickySidebarPaddingTop=1}
if(collapsedBottomHeight==0){o.stickySidebar.css("padding-bottom",0);o.stickySidebarPaddingBottom=0}else{o.stickySidebarPaddingBottom=1}
o.previousScrollTop=null;o.fixedScrollTop=0;resetSidebar();o.onScroll=function(o){if(!o.stickySidebar.is(":visible")){return}
if($("body").width()<o.options.minWidth){resetSidebar();return}
if(o.options.disableOnResponsiveLayouts){var sidebarWidth=o.sidebar.outerWidth(o.sidebar.css("float")=="none");if(sidebarWidth+50>o.container.width()){resetSidebar();return}}
var scrollTop=$(document).scrollTop();var position="static";if(scrollTop>=o.container.offset().top+(o.paddingTop+o.marginTop-o.options.additionalMarginTop)){var offsetTop=o.paddingTop+o.marginTop+options.additionalMarginTop;var offsetBottom=o.paddingBottom+o.marginBottom+options.additionalMarginBottom;var containerTop=o.container.offset().top;var containerBottom=o.container.offset().top+getClearedHeight(o.container);var windowOffsetTop=0+options.additionalMarginTop;var windowOffsetBottom;var sidebarSmallerThanWindow=o.stickySidebar.outerHeight()+offsetTop+offsetBottom<$(window).height();if(sidebarSmallerThanWindow){windowOffsetBottom=windowOffsetTop+o.stickySidebar.outerHeight()}else{windowOffsetBottom=$(window).height()-o.marginBottom-o.paddingBottom-options.additionalMarginBottom}
var staticLimitTop=containerTop-scrollTop+o.paddingTop+o.marginTop;var staticLimitBottom=containerBottom-scrollTop-o.paddingBottom-o.marginBottom;var top=o.stickySidebar.offset().top-scrollTop;var scrollTopDiff=o.previousScrollTop-scrollTop;if(o.stickySidebar.css("position")=="fixed"){if(o.options.sidebarBehavior=="modern"){top+=scrollTopDiff}}
if(o.options.sidebarBehavior=="stick-to-top"){top=options.additionalMarginTop}
if(o.options.sidebarBehavior=="stick-to-bottom"){top=windowOffsetBottom-o.stickySidebar.outerHeight()}
if(scrollTopDiff>0){top=Math.min(top,windowOffsetTop)}else{top=Math.max(top,windowOffsetBottom-o.stickySidebar.outerHeight())}
top=Math.max(top,staticLimitTop);top=Math.min(top,staticLimitBottom-o.stickySidebar.outerHeight());var sidebarSameHeightAsContainer=o.container.height()==o.stickySidebar.outerHeight();if(!sidebarSameHeightAsContainer&&top==windowOffsetTop){position="fixed"}else if(!sidebarSameHeightAsContainer&&top==windowOffsetBottom-o.stickySidebar.outerHeight()){position="fixed"}else if(scrollTop+top-o.sidebar.offset().top-o.paddingTop<=options.additionalMarginTop){position="static"}else{position="absolute"}}
if(position=="fixed"){o.stickySidebar.css({position:"fixed",width:o.sidebar.width(),top:top,left:o.sidebar.offset().left+parseInt(o.sidebar.css("padding-left")),})}else if(position=="absolute"){var css={};if(o.stickySidebar.css("position")!="absolute"){css.position="absolute";css.top=scrollTop+top-o.sidebar.offset().top-o.stickySidebarPaddingTop-o.stickySidebarPaddingBottom}
css.width=o.sidebar.width();css.left="";o.stickySidebar.css(css)}else if(position=="static"){resetSidebar()}
if(position!="static"){if(o.options.updateSidebarHeight==!0){o.sidebar.css({"min-height":o.stickySidebar.outerHeight()+o.stickySidebar.offset().top-o.sidebar.offset().top+o.paddingBottom,})}}
o.previousScrollTop=scrollTop};o.onScroll(o);$(document).scroll((function(o){return function(){o.onScroll(o)}})(o));$(window).resize((function(o){return function(){o.stickySidebar.css({position:"static"});o.onScroll(o)}})(o));function resetSidebar(){o.fixedScrollTop=0;o.sidebar.css({"min-height":"1px",});o.stickySidebar.css({position:"static",width:"",})}
function getClearedHeight(e){var height=e.height();e.children().each(function(){height=Math.max(height,$(this).height())});return height}})}},replaceText:function(search,replace,text_only){return this.each(function(){var node=this.firstChild,val,new_val,remove=[];if(node){do{if(node.nodeType===3){val=node.nodeValue;new_val=val.replace(search,replace);if(new_val!==val){if(!text_only&&/</.test(new_val)){$(node).before(new_val);remove.push(node)}else{node.nodeValue=new_val}}}}while(node=node.nextSibling);}
remove.length&&$(remove).remove()})}});Storages.cookieStorage.setConf({path:'/',expires:30});if('serviceWorker' in navigator){window.addEventListener('load',function(){navigator.serviceWorker.register(app.config.settings.site_url+'/service-worker.js').then(function(registration){},function(err){console.log('ServiceWorker registration failed: ',err)}).catch(function(err){console.log(err)})})}else{console.log('service worker is not supported')}
$(function(){if($('textarea[data-single-line="true"]').length){document.querySelector('textarea[data-single-line="true"]').addEventListener("keydown",(e)=>{if(e.keyCode===13)e.preventDefault();})}});$(document).on("click",".dropdown:not(.bootstrap-select) .dropdown-menu",function(e){e.stopPropagation()});$(document).on("click",'[data-ui="show-editor"], .app-post-create .bootstrap-select > .dropdown-menu a',function(){if(!tinymce.get('post-editor')||$(".app-post-create .app-writer-area").hasClass('d-none')){$(".app-post-create .progress").removeClass("d-none");app.editorConfig("#post-editor");setTimeout(function(){$(".app-post-create .app-writer-area").removeClass("d-none");$('.app-post-create .post-content [name="post-title"]').focus();if($(".title-area.in-discussion").length){$(".title-area.in-discussion").removeClass("d-flex");$(".title-area.in-discussion").hide();if($(this).data("scroll")){app.scrollTopAnchor($(".app-post-create"))}
tinyMCE.activeEditor.focus()}
$(".app-post-create .progress").addClass("d-none")},200)}});$(function(){$(".navbar .search-container :input").donetyping(function(){if($(this).val().length>0&&$(this).val()!=' '){$('.navbar .search-container').addClass('show');$('.navbar .search-container > .search-results').addClass('animate');$('.navbar .search-container > .search-results').addClass('fadeIn');$('.navbar .search-container > .search-results').removeClass('d-none');$('.navbar .search-container > .search-results .load-area').nextAll().remove();$('.navbar .search-container > .search-results .load-area').addClass('d-block');var dataString={keyword:$(this).val()};if($('body .search-results-backdrop').length<1){$('body').append('<div class="modal-backdrop search-results-backdrop show"></div>')}
$(".navbar").css("z-index","1041");$(".navbar").addClass('sticky-top');app.post("search/quick-search",dataString).done(function(response){if(response.status==="ok"){$('.navbar .search-container > .search-results .load-area').removeClass('d-block');$('.navbar .search-container > .search-results .load-area').addClass('d-none');$('.navbar .search-container > .search-results .load-area').after(response.template);$('.navbar .search-container > .search-results .discussions a > span').replaceText(new RegExp('('+dataString.keyword+')','gi'),'<span class="font-weight-bold">$1</span>');$('.navbar .search-container > .search-results .users a > span').replaceText(new RegExp('('+dataString.keyword+')','gi'),'<span class="font-weight-bold">$1</span>')}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('click','.navbar .search-container .form-control-clear',function(e){$('.navbar .search-container').removeClass('show');$('.navbar .search-container > .search-results').addClass('d-none');$('.navbar .search-container > .search-results').removeClass('animate');$('.navbar .search-container > .search-results').removeClass('fadeIn');$('.modal-backdrop.search-results-backdrop').remove();$(".navbar").css("z-index","1");$(".navbar").removeClass('sticky-top')});$(document).on('click','.modal-backdrop.search-results-backdrop',function(e){$('.navbar .search-container').removeClass('show');$('.navbar .search-container > .search-results').addClass('d-none');$('.navbar .search-container > .search-results').removeClass('animate');$('.navbar .search-container > .search-results').removeClass('fadeIn');$('.modal-backdrop.search-results-backdrop').remove();$(".navbar").css("z-index","1");$(".navbar").removeClass('sticky-top')});$(document).on('click','.navbar .search-container input[type="text"]',function(e){if($('.navbar .search-container > .search-results .load-area').nextAll().length>0){$('.navbar .search-container').addClass('show');$('.navbar .search-container > .search-results').removeClass('d-none');$('.navbar .search-container > .search-results').addClass('animate');$('.navbar .search-container > .search-results').addClass('fadeIn');if($('body .search-results-backdrop').length<1){$('body').append('<div class="modal-backdrop search-results-backdrop show"></div>')}
$(".navbar").css("z-index","1041");$(".navbar").addClass('sticky-top')}});$(document).on('click','.notification .friendship-request-buttons > button',function(e){if($(this).hasClass('approve')){var elem=$(this);var dataString={sender_id:$(this).closest('.friendship-request-buttons').data('sender-id')};app.post("account/approve-request-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.friendship-request-buttons').find('.approved-friendship-request').show();elem.closest('.friendship-request-buttons').find('button').remove()}}).fail(function(xhr,status,err){console.log(status,err)})}else{var elem=$(this);var dataString={sender_id:$(this).closest('.friendship-request-buttons').data('sender-id')};app.post("account/remove-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.friendship-request-buttons').find('.removed-friendship-request').show();elem.closest('.friendship-request-buttons').find('button').remove()}}).fail(function(xhr,status,err){console.log(status,err)})}});$('.checkbox.switcher > label').on('click',function(){if(!$(this).find('input').is(':checked')){$(this).find('input').removeAttr('checked')}else{$(this).find('input').attr('checked',!0)}});$(function(){$('.has-clear input[type="text"]').on('input propertychange',function(){var $this=$(this);var visible=Boolean($this.val());$this.siblings('.form-control-clear').toggleClass('d-none',!visible)}).trigger('propertychange');$('.form-control-clear').click(function(){$(this).siblings('input[type="text"]').val('').trigger('propertychange').focus()})});$(function(){var cookieAlert=document.querySelector(".cookiealert");var acceptCookies=document.querySelector(".acceptcookies");cookieAlert.offsetHeight;if(!Storages.localStorage.get("acceptCookies")){cookieAlert.classList.add("show")}
acceptCookies.addEventListener("click",function(){Storages.localStorage.set("acceptCookies",!0);cookieAlert.classList.remove("show")})});$(function(){if($('.sticky').length>0){$('.sticky').stickySidebar({additionalMarginTop:40})}});$(document).on('focusin',function(e){if($(e.target).closest(".tox-tinymce, .tox-tinymce-aux, .moxman-window, .tam-assetmanager-root").length){e.stopImmediatePropagation()}});$(document).ready(function(){app.initTooltip()});$(document).bind('ajaxStop',function(){app.initTooltip()})})(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){window.verifyRecaptchaCallback=function(response){$('#register-attempt input[data-recaptcha]').val(response).trigger('change');$('#register-attempt form').addClass('validated')}
window.expiredRecaptchaCallback=function(){$('#register-attempt input[data-recaptcha]').val("").trigger('change');$('#register-attempt form').removeClass('validated')}
$(document).on('click','#register-attempt [name="login-submit"]',function(){if($('#register-attempt form.validated').length<1){$('#register-attempt #g-recaptcha-error').removeClass('d-none')}})});$(function(){if($('.alert-login').length){$("#login-attempt").modal()}});$(document).on('click','[data-ui="login-attempt"]',function(){event.preventDefault();$("#login-attempt").modal();$('[name="username"]').focus();$(document).on('click','#login-attempt .modal-body a.register',function(){event.preventDefault();$("#login-attempt .close").click();$("#register-attempt").modal()})});$(document).on('click','[data-ui="register-attempt"]',function(){event.preventDefault();$("#register-attempt").modal();$('[name="mail"]').focus();$(document).on('click','#register-attempt .modal-body a.login',function(){event.preventDefault();$("#register-attempt .close").click();$("#login-attempt").modal()})});$(document).on('click','[data-ui="sign-out-confirmation"]',function(){event.preventDefault();$("#sign-out-confirmation").modal()});$(document).on('click','[data-ui="forgot-password"]',function(){event.preventDefault();$(this).closest('.modal').find('.close').click();$("#forgot-password-attempt").modal();$('[name="mail"]').focus()});$(function(){$("#register-attempt form :input[name='username']").donetyping(function(){var dataString={username:$(this).val()};$("#register-attempt form .post-loader-spin").show();$("#register-attempt form #username-control").removeClass('available');$("#register-attempt form #username-control").removeClass('not-available');if($(this).val().length>0){app.post("auth/control-username",dataString).done(function(response){if(response.status==="ok"){$("#register-attempt form .post-loader-spin").hide();if(response.exist===0){$("#register-attempt form #username-control").addClass('available');$("#register-attempt form #username-control").text(app.phrases.username_available);$("#register-attempt form button").attr('disabled',!1)}else if(response.exist===1){$("#register-attempt form #username-control").addClass('not-available');$("#register-attempt form #username-control").text(app.phrases.username_not_available);$("#register-attempt form button").attr('disabled',!0)}}}).fail(function(xhr,status,err){console.log(status,err)})}else{}})});$(function(){if($('.app-account-area .notify-count').text()>0){var title=$(document).attr('title');document.title='('+$('.app-account-area .notify-count').text()+') '+title;$('.app-account-area .btn-app-account.notification').on('click',function(){document.title=title;$('.app-account-area .notify-count').text('');$.ajax({url:app.config.settings.site_url+"/account/mark-read-notifications",type:"post",success:function(response){}})})}
if($('.app-account-area .message-count').text()>0){var title=$(document).attr('title');document.title='('+$('.app-account-area .message-count').text()+') '+title;$('.app-account-area [data-ui="markread-messages"]').on('click',function(e){e.preventDefault();document.title=title;$.ajax({url:app.config.settings.site_url+"/account/mark-read-messages",type:"post",success:function(response){$('.app-account-area .message-count').text('');$('.message-menu a.message').attr('data-is-seeing',1)}})})}else{$('.app-account-area [data-ui="markread-messages"]').on('click',function(e){e.preventDefault()})}
$('.app-account-area [data-ui="message-refresher"]').on('click',function(e){e.preventDefault();$('.message-menu a.notification.message').remove();$('.message-menu .no-records').remove();$('.message-menu .post-loader-spin').show();app.post("account/refresh-messages",{}).done(function(response){if(response.status==="ok"){$('.message-menu .post-loader-spin').hide();$('.message-menu .post-loader-spin').before(response.template);if($('.message-menu a.message[data-is-seeing="0"]').length){$('.app-account-area .message-count').text($('.message-menu a.message[data-is-seeing="0"]').length)}}}).fail(function(xhr,status,err){console.log(status,err)})});$('.app-account-area [data-ui="notification-refresher"]').on('click',function(e){e.preventDefault();$('.notification-menu a.notification').remove();$('.notification-menu .no-records').remove();$('.notification-menu .post-loader-spin').show();app.post("account/refresh-notification",{}).done(function(response){if(response.status==="ok"){$('.notification-menu .post-loader-spin').hide();$('.notification-menu .post-loader-spin').before(response.template);if($('.notification-menu a.notification[data-is-seeing="0"]').length){$('.app-account-area .notify-count').text($('.notification-menu a.notification[data-is-seeing="0"]').length)}}}).fail(function(xhr,status,err){console.log(status,err)})})});$(function(){$('.app-theme-mode').on('click',function(){if($('.app-theme-mode input').is(':checked')){$(this).addClass('active');$('.app-theme-mode input').attr('checked',!0);$('body').addClass('app-night-mode');$('.navbar .navbar-brand > img').attr('src',app.config.settings.logo.night);Storages.cookieStorage.set('night_mode',!0)}else{$(this).removeClass('active');$('.app-theme-mode input').attr('checked',!1);$('body').removeClass('app-night-mode');$('.navbar .navbar-brand > img').attr('src',app.config.settings.logo.light);Storages.cookieStorage.remove('night_mode')}
$(".app-post-create .progress").removeClass("d-none");setTimeout(function(){if($('#post-editor').length){tinymce.remove();app.editorConfig("#post-editor")}
$(".app-post-create .progress").addClass("d-none")},200)});if(Storages.cookieStorage.get("night_mode")){$('.app-theme-mode').addClass('active');$('.app-theme-mode input').attr('checked',!0);if(!$('body').hasClass('app-night-mode')){$('body').addClass('app-night-mode')}}else{$('.app-theme-mode').removeClass('active');$('.app-theme-mode input').attr('checked',!1)}});$(function(){if($('#twoStepVerification_Modal').length){$('.navbar').remove();$('#twoStepVerification_Modal').modal({backdrop:'static',keyboard:!1});$('form#twoStepVerification input[name="twofa_code"]').focus();$("form#twoStepVerification").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();$('form#twoStepVerification .form-error span').text('');var dataString={twofa_code:$('form#twoStepVerification input[name="twofa_code"]').val()};app.post("two-step-verification/verify",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}else if(response.status==="fail"){$('form#twoStepVerification .form-error span').text(app.phrases.alert_messages.two_step_verification_code_error)}}).fail(function(xhr,status,err){console.log(status,err)})}})}});function userTooltipInit(){$('img.user-status:not(.no-tooltip), a.user-tooltip-link').each(function(i,elem){var elem=$(this);if(window.matchMedia('(max-width: 768px)').matches){$(this).closest('a').on('click',function(e){e.preventDefault()});var placement='top'}else{var placement='right'}
var timer;elem.popover({content:'<div class="post-loader-spin d-block"></div>',container:'body',template:'<div class="popover user-tooltip '+elem.data('user-id')+'" role="tooltip"><div class="arrow"></div><div class="popover-body"></div></div>',boundary:'window',trigger:'manual',placement:placement,html:!0}).on("mouseenter",function(){var _this=this;timer=setTimeout(function(){if($(_this).attr('data-user-id')===undefined){console.error('Tooltip error: UserId is missing.');return!1}
$(_this).popover('show');var dataString={user_id:$(_this).data('user-id')};app.post("account/profile-tooltip",dataString).done(function(response){if(response.status==="ok"){$(".popover-body").html(response.template)}}).fail(function(xhr,status,err){console.log(status,err)});$(".popover").on("mouseleave",function(){$(_this).popover('hide')})},600)}).on("mouseleave",function(){clearTimeout(timer);var _this=this;setTimeout(function(){if(!$(".popover:hover").length){$(_this).popover('hide')}},300)})})};$('[data-init="js-Mention_ExternalLogin"]').on('click',function(e){window.location.href=app.config.settings.site_url+'/auth/'+$(this).data('callback')});$(document).on('click','.tooltip.tooltipEmojiBox a.copy',function(event){event.preventDefault();var text=$(this).closest('span').text();document.addEventListener('copy',function(e){e.clipboardData.setData('text/plain',text);e.preventDefault()},!0);document.execCommand("copy");app.flashMessage(app.phrases.alert_messages.copy_to_clipboard)});$(document).bind('ajaxStop',function(){userTooltipInit()});$(document).ready(function(){userTooltipInit()})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(document).on('click','[data-ui="post-refresher"]',function(){$('.app-post-container').addClass('d-none');$('[data-ui="load-more-posts"]').addClass('d-none');$('.post-loader-spin').show();$('.app-post-container').removeClass('d-none');$('[data-ui="load-more-posts"]').removeClass('d-none');$('.post-loader-spin').hide();$('.app-forums a.list-group-item.active').click()});$(document).on('click','[data-ui="load-more-posts"]',function(){$('[data-ui="load-more-posts"]').remove();$('.app-post-container > .appNodeContainer.all > .post-loader-spin').remove();$('.app-post-container > .appNodeContainer.all > .app-post').last().after('<div class="post-loader-spin"></div>');$('.app-post-container > .appNodeContainer.all > .post-loader-spin').show();var dataString={next_id:$(this).data('next-id'),current_page:$(this).data('current-page'),forum_id:$('.app-forums .list-group-item.active').data('forum-id'),order:$('[data-ui="order-index-posts"].active').data('order')};app.post("post/next-page",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="load-more-posts"]').attr('data-current-page',response.current_page)
$('.app-post-container > .appNodeContainer.all > .post-loader-spin').remove();$('.app-post-container > .appNodeContainer.all').append(response.template);$('.app-post-container > .appNodeContainer.all > .app-post').last().after('<div class="post-loader-spin"></div>');$('.app-post-container > .appNodeContainer.all').css('height','auto')}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="expand-node"] a',function(e){e.preventDefault();var nodeContainerElem=$(this).closest('.app-post-container').find('.appNodeContainer.'+$(this).closest('.js-appExpandNodes').data('target'));if(nodeContainerElem.hasClass('expanded')){nodeContainerElem.removeClass('expanded');Storages.cookieStorage.set('collapse_node_'+$(this).closest('.js-appExpandNodes').data('target'),1);$(this).addClass('expanded')}else{nodeContainerElem.addClass('expanded');Storages.cookieStorage.remove('collapse_node_'+$(this).closest('.js-appExpandNodes').data('target'));$(this).removeClass('expanded')}});$(document).on('click','[data-ui="quick-forum-posts"]',function(e){e.preventDefault();$('[data-ui="quick-forum-posts"]').removeClass('active');$('.app-post-container').addClass('d-none');$('.post-loader-spin').show();var dataString={forum_id:$(this).data('forum-id'),order:$('[data-ui="order-index-posts"].active').data('order')};$(this).addClass('active');var elem=$(this);app.post("post/quick-forum-posts",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.app-post-container').html(response.template);$('.app-post-container').removeClass('d-none');$('.app-post-create select[name="forum"]').val(dataString.forum_id);$('.selectpicker').selectpicker('refresh');if(elem.data('forum-id')!=0){window.history.pushState(null,null,elem.attr('href'))}else{window.history.pushState(null,null,app.config.settings.site_url)}}}).fail(function(xhr,status,err){console.log(status,err)})});$(function(){$("#quick-search :input[name='keyword']").donetyping(function(){if($(this).val().length>0&&$(this).val()!=' '){if($("#quick-search :input[name='search-forum']").is(':checked')){if($('.app-forums [data-ui="quick-forum-posts"].active').data('forum-id')===0){var forum_id=null}else{var forum_id=$('.app-forums [data-ui="quick-forum-posts"].active').data('forum-id')}}else{var forum_id=null}
if($('.app-switch input').is(':checked')){$('.app-switch').click();$('.app-forums .filter-content').attr('data-no-refresh',!0);$('.app-switch').removeClass('active');$('.app-switch input').attr('disabled',!0);$('.app-switch').addClass('disabled')}
$('.app-forums a').addClass('disabled');var dataString={keyword:$(this).val(),forum_id:forum_id,order:$('[data-ui="order-index-posts"].active').data('order')};$(".app-post-container").addClass("d-none");$(".app-order-post > button.order-newest").attr('disabled',!0);$(".app-post-manage button.post-refresh").attr('disabled',!0);$(".post-loader-spin").show();$('.app-post-create > .hide-editor').removeClass('d-none');app.post("post/search",dataString).done(function(response){if(response.status==="ok"){$(".post-loader-spin").hide();$(".app-post-container").html(response.template);$(".app-post-container").removeClass("d-none");$(document).on('click','#quick-search .form-control-clear',function(e){$('.app-forums [data-ui="quick-forum-posts"].active').click();$('.app-post-create > .hide-editor').addClass('d-none');if($('.app-switch').hasClass('disabled')){$('.app-switch input').attr('disabled',!1);$('.app-switch').removeClass('disabled');$('.app-switch').click();$('.app-switch').addClass('active');Storages.localStorage.set('auto-refresh-post',!0);$('.app-forums .filter-content').attr('data-no-refresh',!1);$('.app-forums a').removeClass('disabled');$(".app-order-post > button.order-newest").attr('disabled',!1);$(".app-post-manage button.post-refresh").attr('disabled',!1)}})}}).fail(function(xhr,status,err){console.log(status,err)})}else{}})});$(document).on('click','[data-ui="order-index-posts"]',function(e){e.preventDefault();$('[data-ui="order-index-posts"]').removeClass('active');$('.app-post-container').addClass('d-none');$(this).addClass('active');$('.app-order-post button').text($(this).text());$('.app-order-post button').alterClass('order-*','');$('.app-order-post button').addClass('order-'+$(this).data('order'));$('.post-loader-spin').show();var dataString={order:$(this).data('order'),forum_id:$('.app-forums .list-group-item.active').data('forum-id')};var elem=$(this);app.post("post/order-index-posts",dataString).done(function(response){if(response.status==="ok"){$('.app-post-container').removeClass('d-none');$('.post-loader-spin').hide();$('.app-post-container').html(response.template);window.history.pushState(null,null,elem.attr('href'))}}).fail(function(xhr,status,err){console.log(status,err)})});$(function(){$('.app-switch').on('click',function(){if($('.app-switch input').is(':checked')){$(this).addClass('active');$('.app-switch input').attr('checked',!0);Storages.localStorage.set('auto-refresh-post',!0)}else{$(this).removeClass('active');$('.app-switch input').attr('checked',!1);Storages.localStorage.remove('auto-refresh-post')}});if(Storages.localStorage.get("auto-refresh-post")){$('.app-switch').addClass('active');$('.app-switch input').attr('checked',!0)}else{$('.app-switch').removeClass('active');$('.app-switch input').attr('checked',!1)}
if($('.app-forums .filter-content [data-no-refresh="true"]').length<1){if($('.app-forums .list-group-item.active').length>0){$('.app-switch input').change(function(){if(this.checked){var autoRefresher=setInterval(function(event){$('.app-forums .list-group-item.active').click()},60*1000)}else{clearInterval(autoRefresher)}});if($(".app-switch").hasClass('active')){var autoRefresher=setInterval(function(event){$('.app-forums .list-group-item.active').click()},60*1000)}}}
if($('.app-forums [data-ui="quick-forum-posts"].active').length>0){var forum_regex=/f\/([0-9]+)-([a-z0-9-]+)$/g;if(window.location.href.match(forum_regex)){$('.app-forums .list-group-item').removeClass('active');var forum_id=forum_regex.exec(window.location.href);$('.app-forums [data-forum-id="'+forum_id[1]+'"]').click();$('.app-forums [data-forum-id="'+forum_id[1]+'"]').addClass('active')}}
if($('[data-ui="order-index-posts"].active').length>0){var index_tab_regex=/(newest|popular|top-likes|oldest)$/g;if(window.location.href.match(index_tab_regex)){$('.app-forums .list-group-item').removeClass('active');var tab_id=index_tab_regex.exec(window.location.href);$('[data-ui="order-index-posts"][data-order="'+tab_id[0]+'"]').click()}}});$(function(){if($('.app-forums-mobile').is(':visible')){$('.app-forums-mobile .post-loader-spin').show();$('.app-forums-mobile').removeClass('mb-4');$('.app-forums-mobile small').remove();setTimeout(function(){$('.app-forums-mobile').append($('.app-forums').eq(0).clone());$('.app-forums-mobile').append($('.app-forums').eq(1).clone());$('.app-forums-mobile .post-loader-spin').remove()},300)}})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){if($('body[data-template="discussion"]').length){if($('[class^=bbWrapper]').length){$('[class^=bbWrapper]').each(function(){var elem=$(this);$(this).closest('.app-post').find('.progress').removeClass('d-none');$($(this).find('iframe')).on('load',function(){elem.closest('.app-post').find('.progress').addClass('d-none')})})}}});$(function(){if($('body[data-template="discussion"]').length){if($('.quote-container .quote-container .quote-container .quote-container').length){$('.quote-container .quote-container .quote-container .quote-container').remove()}}});$(document).on('click','.expandQuote a',function(e){e.preventDefault();var quoteContainerElem=$(this).closest('.discussion-text .bbContainer_appQuote');$(quoteContainerElem).css({'max-height':quoteContainerElem.data('height')+'px','height':'auto'});$(this).closest('.expandQuote').addClass('d-none')});$(document).on('click','[data-ui="order-discussion-posts"]',function(e){e.preventDefault();$('[data-ui="order-discussion-posts"]').removeClass('active');$('.post:not(.first-post)').remove();$(this).addClass('active');$('.app-order-discussion-post button').text($(this).text());$('.app-order-discussion-post button').alterClass('order-*','');$('.app-order-discussion-post button').addClass('order-'+$(this).data('order'));$('.post-loader-spin').show();var dataString={discussion_id:$('.post.first-post').data('discussion-id'),order:$(this).data('order')};app.post("post/order-discussion-posts",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.post-timeliner div.last-post').text($('[data-ui="order-discussion-posts"].active').data('scrubber-text'))
$('.post.first-post').after(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="copy-link"]',function(e){e.preventDefault();e.stopPropagation();var link=$(this).attr('href');$(this).attr('data-complete','1');document.addEventListener('copy',function(e){e.clipboardData.setData('text/plain',link);e.preventDefault()},!0);document.execCommand("copy");$('.custom-menu [data-complete="1"] .text span').addClass('active');var link_text=$('.custom-menu [data-complete="1"] .text span').text();$('.custom-menu [data-complete="1"] .text span').text($('.custom-menu [data-complete="1"]').data('complete-text'));setTimeout(function(event){$('.custom-menu [data-complete="1"] .text span').text(link_text);$('.custom-menu [data-complete="1"] .text span').removeClass('active')},1000)});$(document).on('click','[data-ui="report-post"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/report",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');if($('#post-report[data-post-id="'+response.post_id+'"]').length<1){$('body').append(response.template)}
$('#post-report[data-post-id="'+response.post_id+'"]').modal();$('#post-report[data-post-id="'+response.post_id+'"] textarea').focus()}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','.js-ClickableDivs[data-ui="quick-reporting"] > div',function(e){e.preventDefault();e.stopPropagation();$(this).closest('#post-report').find('textarea').val($(this).text());$(this).closest('#post-report').find('textarea').focus()});$(document).bind('ajaxStop',function(){$('#post-report form').each(function(){var post_id=$(this).closest('#post-report').data('post-id');$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#post-report[data-post-id="'+post_id+'"]');elem.find('button').attr('disabled',!0);if(elem.find('[name="report-text"]').val().length<1){app.flashMessage(app.phrases.report_cannot_be_blank,'warning');elem.find('button').attr('disabled',!1);return!1}
var dataString={post_id:post_id,content:elem.find('[name="report-text"]').val()};app.post("post/report-complete",dataString).done(function(response){if(response.status==="ok"){elem.find('button').addClass('succeeded');elem.find('button').text(elem.find('button').data('complete-text'));elem.find('span.close').click();app.flashMessage(app.phrases.alert_messages.report_post)}}).fail(function(xhr,status,err){console.log(status,err)})}})})});$(document).on('click','[data-ui="delete-post"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/delete",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');if($('#post-delete[data-post-id="'+response.post_id+'"]').length<1){$('body').append(response.template);$('#post-delete[data-post-id="'+response.post_id+'"]').modal()}else{$('#post-delete[data-post-id="'+response.post_id+'"]').modal()}}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).bind('ajaxStop',function(){$('#post-delete form').each(function(){var post_id=$(this).closest('#post-delete').data('post-id');$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#post-delete[data-post-id="'+post_id+'"]');elem.find('button').attr('disabled',!0);var dataString={post_id:post_id};app.post("post/delete-complete",dataString).done(function(response){if(response.status==="ok"){elem.find('button').addClass('succeeded');elem.find('button').text(elem.find('button').data('complete-text'));elem.find('span.close').click();if($('.app-post-container > .post[data-post-id="'+response.post_id+'"]').hasClass('first-post')){window.location.replace(app.config.settings.site_url)}else{$('.app-post-container > .post[data-post-id="'+response.post_id+'"]').remove()}
$('.app-post-container > .post').each(function(i,elem){var i=(i+1)
$(this).attr('data-item',i)});app.flashMessage(app.phrases.alert_messages.delete_post)}}).fail(function(xhr,status,err){console.log(status,err)})}})})});$(document).on('click','[data-ui="edit-post"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/edit",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');if($('#post-edit[data-post-id="'+response.post_id+'"]').length<1){$('body').append(response.template)}
app.editorConfig('#edit_'+response.post_id);tinymce.get('edit_'+response.post_id).setContent(twemoji.parse(response.content),{format:'bbcode'});$('#post-edit[data-post-id="'+response.post_id+'"]').modal()}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','#post-edit .edit-attachments .attachment a',function(e){e.preventDefault();e.stopPropagation();$(this).closest('.attachment').addClass('removed')});$(document).on('change','[name="edit_post_attachment"]',function(){var filenames=[];for(var i=0;i<$(this).get(0).files.length;++i){filenames.push($(this).get(0).files[i].name)}
$(this).next('label').text(filenames.join(', '))});$(document).bind('ajaxStop',function(){$('#post-edit form').each(function(){var post_id=$(this).closest('#post-edit').data('post-id');$('#post-edit[data-post-id="'+post_id+'"]').find('form').trackChanges();$(this).validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var elem=$('#post-edit[data-post-id="'+post_id+'"]');elem.find('button').attr('disabled',!0);var post_title=!1;if(elem.find('[name="post-title"]').length>0){if(elem.find('[name="post-title"]').val().length<1){app.flashMessage(app.phrases.title_cannot_be_blank,'warning');elem.find('button').attr('disabled',!1);return!1}
if(elem.find('[name="post-title"]').val().length<app.config.settings.title_char_min){app.flashMessage(app.phrases.title_is_greater_then,'warning');elem.find('button').attr('disabled',!1);return!1}
var post_title=elem.find('[name="post-title"]').val()}
if(app.getStats('edit_'+post_id).chars<=app.config.settings.content_char_min){app.flashMessage(app.phrases.content_is_greater_then,'warning');elem.find('button').attr('disabled',!1);return!1}
var dataString=new FormData();dataString.append('post_id',post_id);dataString.append('content',tinyMCE.get('edit_'+post_id).getContent());dataString.append('post_title',post_title);if(elem.find('.attachment.removed').length){elem.find('.attachment.removed').each(function(i){dataString.append('removeAttachments[]',$(this).data('attachment-id'))})}
if(elem.find('[name="edit_post_attachment"]').val().length){for(var i=0;i<elem.find('[name="edit_post_attachment"]').get(0).files.length;++i){if(elem.find('[name="edit_post_attachment"]').get(0).files[i].size>app.config.settings.attachment_max_size){app.flashMessage(app.phrases.attachment_max_size.replace('{2}',elem.find('[name="edit_post_attachment"]').get(0).files[i].name),'warning');elem.find('button').attr('disabled',!1);return!1}
dataString.append('attachments[]',elem.find('[name="edit_post_attachment"]').get(0).files[i])}
dataString.append('is_attachment',!0)}
if(post_title!==!1){if(elem.find('form').isChanged()){var redirect=!0}else{var redirect=!1}}
app.post("post/edit-complete",dataString,!1,!1).done(function(response){if(response.status==="ok"){elem.find('button').addClass('succeeded');elem.find('button').text(elem.find('button').data('complete-text'));elem.closest('.modal').remove();$('.modal-backdrop').remove();$('body').removeClass('modal-open');for(var i=tinymce.editors.length-1;i>-1;i--){tinyMCE.execCommand("mceRemoveEditor",!0,tinymce.editors[i].id)}
var post_elem=$('.post[data-post-id="'+response.post_id+'"]');post_elem.find('.progress').removeClass('d-none');post_elem.find('.discussion-text > article').html(response.template);post_elem.find('.post-attachment-area').html(response.attachmentTemplate);post_elem.find('.progress').addClass('d-none');app.editorConfig('#post-editor');app.flashMessage(app.phrases.alert_messages.edit_post);if(redirect){window.location.reload()}}}).fail(function(xhr,status,err){console.log(status,err)})}})})});$(document).on('click','[data-ui="like-post"]',function(e){e.preventDefault();e.stopPropagation();if("ontouchstart" in document.documentElement){if($(this).is('a')){return!1}}
if($(this).data('reaction')){var dataString={post_id:$(this).closest('.post').data('post-id'),reaction:$(this).data('reaction')};var reactionText=$(this).find('label').text()}else{var dataString={post_id:$(this).closest('.post').data('post-id'),reaction:'like'};var reactionText=$(this).closest('.like-button').data('toggle-text')}
var elem=$(this).closest('.like-button');elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/like",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.addClass('reaction')
elem.addClass(dataString.reaction);elem.find('.reaction-box').addClass('d-none');elem.find('span').text(reactionText);elem.attr('data-ui','take-like-post');elem.closest('.post').find('.post-likes').remove();elem.closest('.post').find('.post-append').append(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="take-like-post"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id'),user_id:$(this).closest('.post').data('user-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/take-like",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.removeClass('reaction');elem.removeClass(elem.attr('class').split(' ').pop());elem.find('.reaction-box').removeClass('d-none');elem.find('span').text(elem.data('text'));elem.attr('data-ui','like-post');elem.closest('.post').find('.post-likes').remove();elem.closest('.post').find('.post-append').append(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="post-quote"]',function(e){e.preventDefault();e.stopPropagation();var post_id=$(this).closest('.post').data('post-id');var elem=$(this);elem.closest('.post').find('[data-ui="post-quote"]').attr('post-quote');$('[data-ui="show-editor"]').click();var currentContent=tinymce.get('post-editor').getContent();if(app.getStats('post-editor').chars<1){var quoteInner='[post-quote]'+post_id+'[/post-quote]'}else{var quoteInner='<p><br></p>[post-quote]'+post_id+'[/post-quote]'}
tinymce.get('post-editor').execCommand('mceInsertContent',!1,currentContent+quoteInner)});$(document).on('click','[data-ui="post-bookmark"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/bookmark",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.attr('data-ui','post-bookmark-undo');elem.find('span').text(elem.data('toggle-text'));elem.find('span').addClass('active');app.flashMessage(app.phrases.alert_messages.bookmark_post)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="post-bookmark-undo"]',function(e){e.preventDefault();e.stopPropagation();var dataString={post_id:$(this).closest('.post').data('post-id')};var elem=$(this);elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("post/undo-bookmark",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.attr('data-ui','post-bookmark');elem.find('span').text(elem.data('text'));elem.find('span').removeClass('active');app.flashMessage(app.phrases.alert_messages.unbookmark_post)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="move-discussion"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this);var dataString={discussion_id:$(this).closest('.post').data('discussion-id')};if($('.modal#move-discussion').length<1){elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("moderation/discussion/move",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');$('body').append(response.template);$('select option[value="'+response.forum_id+'"').attr('selected',!0);$('.selectpicker').selectpicker();$('.modal#move-discussion').modal()}}).fail(function(xhr,status,err){console.log(status,err)})}else{$('.modal#move-discussion').modal()}});$(document).bind('ajaxStop',function(){$('#move-discussion form').validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();var dataString={discussion_id:$('#move-discussion').data('discussion-id'),forum_id:$('#move-discussion [name="forum"]').val()};if($('.post.first-post').data('forum-id')!=dataString.forum_id){app.post("moderation/discussion/move-complete",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})}}})});$(document).on('click','[data-ui="pin-discussion"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this);var dataString={discussion_id:$(this).closest('.post').data('discussion-id')};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("moderation/discussion/pin",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="un-pin-discussion"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this);var dataString={discussion_id:$(this).closest('.post').data('discussion-id')};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("moderation/discussion/un-pin",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="lock-discussion"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this);var dataString={discussion_id:$(this).closest('.post').data('discussion-id')};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("moderation/discussion/lock",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="open-discussion"]',function(e){e.preventDefault();e.stopPropagation();var elem=$(this);var dataString={discussion_id:$(this).closest('.post').data('discussion-id')};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("moderation/discussion/un-lock",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})});$(function(){$('.app-post-container > .post').each(function(i,elem){var i=(i+1)
$(this).attr('data-item',i)});var hiddenPagingOnPost_Fire=function(){if($('[data-feature="hidden-paging"]').length){var page_elem=$('[data-feature="hidden-paging"]');$('.post-loader-spin').show();var dataString={discussion_id:$('.post.first-post').data('discussion-id'),next_id:page_elem.data('next-id'),current_page:page_elem.data('current-page'),order:$('[data-ui="order-discussion-posts"].active').data('order')};$('[data-feature="hidden-paging"]').remove();app.post("post/next-discussion-page",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.app-post-container > .post:last').after(response.template);$('.app-post-container > .post').each(function(i,elem){var i=(i+1)
$(this).attr('data-item',i)});if($('[data-feature="hidden-paging"]').length<1){$('[data-ui="load-more-dposts-mobile"]').remove()}}}).fail(function(xhr,status,err){console.log(status,err)})}}
var hiddenPagingOnPost=function(){var scrollHeight=$(document).height();var scrollPosition=$(window).height()+$(window).scrollTop();if((scrollHeight-scrollPosition)/scrollHeight===0){hiddenPagingOnPost_Fire()}};if('ontouchmove' in document.documentElement){$('[data-ui="load-more-dposts-mobile"]').removeClass('d-none');$(document).on('click','[data-ui="load-more-dposts-mobile"]',function(){hiddenPagingOnPost_Fire()})}else{$(window).on('scroll',hiddenPagingOnPost)}});$(document).on('click','[data-ui="go-first-post"]',function(){app.scrollTopAnchor($('.post.first-post'))});$(document).on('click','[data-ui="go-last-post"]',function(){$("html, body").animate({scrollTop:$(document).height()+100000},'slow');$('.post.last-post').addClass('highlight');setTimeout(function(){$('.post.last-post').removeClass('highlight')},1000)});function updateLastPost(){if($('.app-post-container > .post').length>1){$('.app-post-container > .post:last').addClass('last-post')}};function quoteRenderer(){if($('body[data-template="discussion"]').length){if($('.expandQuote').length){$('.expandQuote').each(function(index){if($(this).closest('.bbContainer_appQuote').height()>200){$(this).closest('.bbContainer_appQuote').attr('data-height',$(this).closest('.bbContainer_appQuote').outerHeight(!0));$(this).closest('.bbContainer_appQuote').addClass('overflow-hidden');$(this).closest('.bbContainer_appQuote').css('max-height','200px');$(this).find('a').text(app.phrases.expand);$(this).removeClass('d-none')}})}}};$(document).ready(function(){updateLastPost();quoteRenderer()});$(document).bind('ajaxStop',function(){updateLastPost();quoteRenderer()});var scrubber=new ScrubberView();$(function(){$(document).ready(function(){$('.scrollbar-area:not(.no-scrollbar) .scrubber__index').html(($('.app-post-container .post:nth-child(1)').index()+1));$('.scrubber__date').html($('.app-post-container .post:nth-child(1)').data('date'))});if($('.post.first-post').length>0){var count=$('.post.first-post').data('post-count');scrubber.min(1).max(count).step(1).value(count).orientation('vertical');$(window).bind('scroll',function(){$('.app-post-container .post').each(function(){var post=$(this);var position=post.position().bottom-$(window).scrollTop();if(post.isOnScreen()){$('.scrubber__index').html((post.index()+1));$('.scrubber__date').html(post.data('date'));scrubber.value(count-(post.index()+1)+1)}})})}});$(function(){if($('.post.first-post').data('post-count')>2){$('.scrollbar-area').append(scrubber.elt);var count=$('.post.first-post').data('post-count');var post=$('.post[data-item="1"]');$('.scrubber__index').html(post.data('item'));$('.scrubber__date').html(post.data('date'));scrubber.onScrubStart=function(value){var value=((count-value)+1);if(value==='-1'){var value=1}
if(value>6){if($('.scrollbar-area .backto-post').has('.d-block')){$('.scrollbar-area .backto-post').addClass('d-none');$('.scrollbar-area .backto-post').removeClass('active')}
$('.scrollbar-area .backto-post').addClass('active');$('.scrollbar-area .backto-post > button').attr('data-post-id',value);$('.scrollbar-area .backto-post').css('top',$('.scrollbar-area .thumb').css('top'))}}
scrubber.onValueChanged=function(value){var value=((count-value)+1);if(value==='-1'){var value=1}
var post=$('.post[data-item="'+value+'"]');$('.scrubber__index').html(value);$('.scrubber__date').html(post.data('date'));$('.scrollbar-area .info').css('top',$('.scrollbar-area .thumb').css('top'))}
scrubber.onScrubEnd=function(value){var value=((count-value)+1);if(value==='-1'){var value=1}
if($('.scrollbar-area .backto-post').hasClass('active')){$('.scrollbar-area .backto-post').removeClass('d-none')}
var post=$('.post[data-item="'+value+'"]');if(post.length>0){app.scrollTopAnchor(post)}else{$('.post-loader-spin').show();var dataString={discussion_id:$('.post.first-post').data('discussion-id'),post_count:$('.scrollbar-area .info .post-count').text(),request_post:$('.scrollbar-area .info .scrubber__index').text(),order:$('[data-ui="order-discussion-posts"].active').data('order')};app.post("post/next-request-discussion-page",dataString).done(function(response){if(response.status==="ok"){$('[data-feature="hidden-paging"]').remove();$('.post-loader-spin').hide();$('.app-post-container > .post:not(.first-post)').remove();$('.app-post-container > .first-post').after(response.template);$('.app-post-container > .post').each(function(i,elem){var i=(i+1)
$(this).attr('data-item',i)});if($('.post[data-post-id="'+$('.post.first-post').data('last-post-id')+'"').length>0){$('[data-feature="hidden-paging"]').remove()}
app.scrollTopAnchor($('[data-item="'+response.whichPost+'"]'))}}).fail(function(xhr,status,err){console.log(status,err)})}}
$('.scrollbar-area [data-ui="backto-post"]').on('click',function(){$('.scrollbar-area .backto-post').addClass('d-none');$('.scrollbar-area .backto-post').removeClass('active');app.scrollTopAnchor($('[data-item="'+$(this).data('post-id')+'"]'))})}});$(document).on('click','[data-ui="discussion-post-refresher"]',function(){$('.app-order-discussion-post a.active').click()});$(document).on('click','[data-ui="share"]',function(e){e.preventDefault();e.stopPropagation()});$(function(){$('[data-ui="share"]').popover({trigger:'click',placement:'bottom',animation:!0,title:$('.share-popover-container').data('title'),content:$('.share-popover-container').html(),html:!0});$('.share-popover-container').remove();$(document).on("click",'.share-content a',function(e){e.preventDefault();e.stopPropagation();window.open(this.href,'popUpWindow','height=400,width=600,left=10,top=10,,scrollbars=yes,menubar=no');$('[data-ui="share"]').popover('hide')})});$("html").on("mouseup",function(e){var l=$(e.target);if(l[0].className.indexOf("popover")==-1){$(".popover").each(function(){$(this).popover("hide")})}});$(document).on('click','[data-ui="subscribe-discussion"]',function(e){e.preventDefault();$(this).removeClass('subscription')
$(this).addClass('subscription-remove');var dataString={discussion_id:$('.post.first-post').data('discussion-id')};app.post("post/discussion-subscribe",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="subscribe-discussion"]').text($('[data-ui="subscribe-discussion"]').data('remove-text'));$('[data-ui="subscribe-discussion"]').attr('data-ui','remove-subscribe-discussion');app.flashMessage(app.phrases.alert_messages.subscribe_success)}else if(response.status==="allready-subscribe"){app.flashMessage(app.phrases.alert_messages.subscribe_allready)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="remove-subscribe-discussion"]',function(e){e.preventDefault();$(this).removeClass('subscription-remove')
$(this).addClass('subscription');var dataString={discussion_id:$('.post.first-post').data('discussion-id')};app.post("post/discussion-remove-subscribe",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="remove-subscribe-discussion"]').text($('[data-ui="remove-subscribe-discussion"]').data('text'));$('[data-ui="remove-subscribe-discussion"]').attr('data-ui','subscribe-discussion');app.flashMessage(app.phrases.alert_messages.subscribe_remove)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="quick-add-as-friend"]',function(e){e.preventDefault();var elem=$(this);var dataString={user_id:$(this).closest('.post').data('user-id'),};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("account/add-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.find('span').text(elem.data('complete-text'));elem.attr('data-ui','quick-remove-friend');app.flashMessage(app.phrases.alert_messages.add_friend)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="quick-remove-friend"]',function(e){e.preventDefault();var elem=$(this);var dataString={user_id:$(this).closest('.post').data('user-id'),};elem.closest('.app-discussion').find('.progress').removeClass('d-none');app.post("account/remove-friend",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.find('span').text(elem.data('text'));elem.attr('data-ui','quick-add-as-friend');app.flashMessage(app.phrases.alert_messages.remove_friend)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="spoiler-btn"]',function(e){$(this).toggleClass('show')});$(function(){if($('body[data-template="discussion"]').length){var post_regex=/p\/([0-9A-Za-z]+)$/g;var post_regex2=/d\/([0-9]+)-([a-z-]+)\/([0-9]+)$/g;if(window.location.href.match(post_regex)){var post=post_regex.exec(window.location.href)[1];if($('.app-post-container > .post[data-shortcode="'+post+'"]').length){app.scrollTopAnchor($('.app-post-container > .post[data-shortcode="'+post+'"]'))}else{$("html, body").animate({scrollTop:$(document).height()+100000},'slow');app.scrollTopAnchor($('.app-post-container > .post[data-shortcode="'+post+'"]'))}}}});function codeHighlighterTitle(){$('.bbContainer_appCodeBlock').each(function(i,elem){$(this).find('.codeBlockTitle').html(app.phrases.code_block+' - <span style="text-transform: capitalize; font-weight: 900;">'+$(this).find('pre').attr('class').replace(' language-','')+'</span>')})}
function renderLink(){if($('body[data-template="discussion"]').length){if($('.discussion-text > article > a:not(.no-unfurl)').length){$('.discussion-text > article > a:not(.no-unfurl)').each(function(i,elem){var matchingUrl=$(this).attr('href').match(/\b(http|https)?(:\/\/)?(\S*)\.?(\w{2,4})(.*)/g)
if(matchingUrl){var elem=$(this);elem.addClass('d-none');var elem_id=Math.floor(Math.random()*1000);elem.closest('.app-discussion').find('.progress').removeClass('d-none');var dataString={url:matchingUrl[0]}
var html="<div class=\"js-appExternalLink d-flex shadow-sm rounded mb-3\" data-id=\""+elem_id+"\"><div class=\"image mr-2\"><div class=\"post-loader-spin m-0 d-block\"></div></div><div class=\"content\"><h6 class=\"font-weight-bold mb-1\"><a class=\"text-dark\" href=\"#\" target=\"blank\">"+app.phrases.proceed+"</a></h6><div class=\"description\"></div><div class=\"link\"></div></div></div>";elem.after(html);var replacedHtml=elem.next();app.post("post/external-link-renderer",dataString).done(function(response){if(response.status==="ok"){if(response.data.image!==null){replacedHtml.find('.image').html('<img src='+response.data.image+' />')}else{replacedHtml.find('.image').addClass('d-none');replacedHtml.find('.content').addClass('pl-2')}
replacedHtml.find('.content > h6 > a').attr('href',response.data.url);replacedHtml.find('.content > h6 > a').text(response.data.title);replacedHtml.find('.content > .description').text(response.data.description);replacedHtml.find('.content > .link').text(response.data.site);replacedHtml.addClass('show');elem.closest('.app-discussion').find('.progress').addClass('d-none');elem.remove()}else if(response.status==="fail"||response.status==="timeout"||response.status==="exception"){if(typeof response.message!=="undefined"){console.log(response.message)}
elem.closest('.app-discussion').find('.progress').addClass('d-none');replacedHtml.remove();elem.addClass('no-unfurl');elem.removeClass('d-none')}}).fail(function(xhr,status,err){console.log(status,err)})}})}}}
$(document).bind('ajaxStop',function(){app.reactionBox();app.twitterApi();renderLink();Prism.highlightAll();codeHighlighterTitle()});$(document).ready(function(){app.reactionBox();app.twitterApi();renderLink();codeHighlighterTitle()})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){$("#app-create-post").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();if($('.app-post-create [name="post-title"]').val().length<1){app.flashMessage(app.phrases.title_cannot_be_blank,'warning');return!1}
if($('.app-post-create [name="post-title"]').val().length<app.config.settings.title_char_min){app.flashMessage(app.phrases.title_is_greater_then,'warning');return!1}
if(app.getStats('post-editor').chars<=app.config.settings.content_char_min){app.flashMessage(app.phrases.content_is_greater_then,'warning');return!1}
if($('.app-post-create [name="forum"] option:selected').val().length<1){app.flashMessage(app.phrases.please_select_a_forum,'warning');return!1}
if($('.app-post-create [name="discussion_attachment"]').val().length){if($('.app-post-create [name="discussion_attachment"]').get(0).files.length>app.config.settings.attachment_max){app.flashMessage(app.phrases.attachment_max,'warning');return!1}}
var dataString=new FormData();dataString.append('discussion_name',$('.app-post-create [name="post-title"]').val());dataString.append('forum_id',$('.app-post-create [name="forum"]').val());dataString.append('content',tinyMCE.get('post-editor').getContent());if($('.app-post-create [name="is_pinned"]').length){dataString.append('is_sticky',$('.app-post-create [name="is_pinned"]').is(':checked')?1:0)}
if($('.app-post-create [name="is_locked"]').length){dataString.append('is_open',$('.app-post-create [name="is_locked"]').is(':checked')?0:1)}
if($('.app-post-create [name="discussion_attachment"]').val().length){for(var i=0;i<$('.app-post-create [name="discussion_attachment"]').get(0).files.length;++i){if($('.app-post-create [name="discussion_attachment"]').get(0).files[i].size>app.config.settings.attachment_max_size){$('.app-post-create .progress').addClass('d-none');app.flashMessage(app.phrases.attachment_max_size.replace('{2}',$('.app-post-create [name="discussion_attachment"]').get(0).files[i].name),'warning');return!1}
dataString.append('attachments[]',$('.app-post-create [name="discussion_attachment"]').get(0).files[i])}
dataString.append('is_attachment',!0)}
$('.app-post-create .progress').removeClass('d-none');app.post("post/create-discussion",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-post-create .progress').addClass('d-none');$('.app-post-create [name="post-title"]').val('');$('.app-post-create [name="forum"]').val('');$('.app-post-create [name="content"]').val('');$('.app-post-create .app-writer-area').addClass('d-none');tinymce.get('post-editor').setContent('');app.removeEditorDraft();$('[data-ui="post-refresher"]').click()}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('change','[name="discussion_attachment"]',function(){var filenames=[];for(var i=0;i<$(this).get(0).files.length;++i){filenames.push($(this).get(0).files[i].name)}
$(this).next('label').text(filenames.join(', '))});$(function(){$("#app-create-discussion-post").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();if(app.getStats('post-editor').chars<=app.config.settings.content_char_min){app.flashMessage(app.phrases.content_is_greater_then,'warning');return!1}
var dataString=new FormData();dataString.append('discussion_id',$('.post.first-post').data('discussion-id'));dataString.append('forum_id',$('.post.first-post').data('forum-id'));dataString.append('content',tinyMCE.get('post-editor').getContent());if($('.app-post-create [name="discussion_attachment"]').val().length){for(var i=0;i<$('.app-post-create [name="discussion_attachment"]').get(0).files.length;++i){if($('.app-post-create [name="discussion_attachment"]').get(0).files[i].size>app.config.settings.attachment_max_size){$('.app-post-create .progress').addClass('d-none');app.flashMessage(app.phrases.attachment_max_size.replace('{2}',$('.app-post-create [name="discussion_attachment"]').get(0).files[i].name),'warning');return!1}
dataString.append('attachments[]',$('.app-post-create [name="discussion_attachment"]').get(0).files[i])}
dataString.append('is_attachment',!0)}
$('.app-post-create .progress').removeClass('d-none');app.post("post/create-post",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.app-post-create .progress').addClass('d-none');$('.app-post-create .title-area').show();$('.app-post-create .app-writer-area').addClass('d-none');$('.app-order-discussion-post a[data-order="newest"]').click();if($('.no-post.d-block').length>0){$('.no-post').removeClass('d-block');$('.no-post').addClass('d-none')}
if($('.app-order-discussion-post button').hasClass('disabled')){$('.app-order-discussion-post button').removeClass('disabled');$('.app-order-discussion-post button').attr('disabled',!1)}
tinymce.get('post-editor').setContent('');app.removeEditorDraft()}}).fail(function(xhr,status,err){console.log(status,err)})}})})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(document).on('click','[data-ui="profile-quick-tab"]',function(e){e.preventDefault();$('[data-ui="profile-quick-tab"].active').removeClass('active');$(this).addClass('active');$('.app-post-container').hide();$('.post-loader-spin').show();var dataString={user_id:$('.app-profile-info').data('user-id'),order:$('[data-ui="order-profile-posts"].active').data('order'),tab:$(this).data('tab')};var elem=$(this);app.post("post/quick-tabs",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.app-post-container').html(response.template);$('.app-post-container').show();$('[data-ui="order-profile-posts"]').each(function(index){if(elem.data('tab')==='posts'){$(this).attr('href',$(this).data('href'))}else if(elem.data('tab')==='discussions'){$(this).attr('href',$(this).data('toggle-href'))}});window.history.pushState(null,null,$('[data-ui="order-profile-posts"].active').attr('href'))}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="load-more-profile-posts"]',function(){$('[data-ui="load-more-profile-posts"]').remove();$('.post-loader-spin').show();var dataString={next_id:$(this).data('next-id'),current_page:$(this).data('current-page'),user_id:$('.app-profile-info').data('user-id'),order:$('[data-ui="order-profile-posts"].active').data('order'),tab:$('[data-ui="profile-quick-tab"].active').data('tab')};app.post("post/profile-posts-next-page",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="load-more-profile-posts"]').attr('data-current-page',response.current_page)
$('.post-loader-spin').hide();$('.app-post-container').append(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="order-profile-posts"]',function(e){e.preventDefault();$('[data-ui="order-profile-posts"]').removeClass('active');$('.app-post-container').addClass('d-none');$(this).addClass('active');$('.app-order-profile-post button').text($(this).text());$('.app-order-profile-post button').alterClass('order-*','');$('.app-order-profile-post button').addClass('order-'+$(this).data('order'));$('.post-loader-spin').show();var dataString={user_id:$('.app-profile-info').data('user-id'),order:$(this).data('order'),tab:$('[data-ui="profile-quick-tab"].active').data('tab')};$(this).addClass('active');var elem=$(this);app.post("post/order-profile-posts",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.app-post-container').html(response.template);$('.app-post-container').removeClass('d-none');window.history.pushState(null,null,elem.attr('href'))}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="add-as-friend"]',function(e){e.preventDefault();var dataString={user_id:$('.app-profile-info').data('user-id'),};app.post("account/add-friend",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('[data-ui="add-as-friend"]').text($('[data-ui="add-as-friend"]').data('complete-text'));$('[data-ui="add-as-friend"]').removeClass('add-friend');$('[data-ui="add-as-friend"]').addClass('awaiting-friend');$('[data-ui="add-as-friend"]').attr('data-ui','remove-friend');app.flashMessage(app.phrases.alert_messages.add_friend)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="remove-friend"]',function(e){e.preventDefault();var dataString={user_id:$('.app-profile-info').data('user-id'),};app.post("account/remove-friend",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('[data-ui="remove-friend"]').text($('[data-ui="remove-friend"]').data('text'));$('[data-ui="remove-friend"]').removeClass('remove-friend');$('[data-ui="remove-friend"]').removeClass('awaiting-friend');$('[data-ui="remove-friend"]').addClass('add-friend');$('[data-ui="remove-friend"]').attr('data-ui','add-as-friend');app.flashMessage(app.phrases.alert_messages.remove_friend)}}).fail(function(xhr,status,err){console.log(status,err)})});$(function(){if($('[data-ui="order-profile-posts"].active').length>0){var profile_tab_regex=/(posts|discussions)(\/)?(newest|top-likes|oldest)?$/g;if(window.location.href.match(profile_tab_regex)){$('.app-forums [data-ui="profile-quick-tab"].active').removeClass('active');var tab=profile_tab_regex.exec(window.location.href);$('.app-forums [data-tab="'+tab[1]+'"]').click();$('.app-forums [data-tab="'+tab[1]+'"]').addClass('active');$('[data-ui="order-profile-posts"][data-order="'+tab[3]+'"]').click()}}})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){$('.app-tab-container > .tab-content.'+$('[data-ui="account-tab-item"].active').data('tab')).addClass('show')});$(document).on('click','[data-ui="account-tab-item"]',function(e){e.preventDefault();if(!$('.app-tab-container > .tab-content.'+$(this).data('tab')).hasClass('show')){$('[data-ui="account-tab-item"]').removeClass('active');$(this).addClass('active');$('.app-tab-container > .tab-content').removeClass('show');$('.app-tab-container > .tab-content.'+$(this).data('tab')).addClass('show');$('.app-breadcrumb > .tab').text($(this).text());if($('body[data-template="account"]').length){window.history.pushState(null,null,app.config.settings.site_url+"/account/"+$(this).data('tab'))}}});$(document).on('click','[data-ui="profile-picture-quick-preview"] > div',function(e){e.preventDefault();if($(this).hasClass('active')){$(this).removeClass('active');$('#acs_settings > .profile-picture > label > img').attr('src',$('[data-ui="profile-picture-quick-preview"] > div.default').data('src'))}else{$('[data-ui="profile-picture-quick-preview"] > div').removeClass('active');$(this).addClass('active');$('#acs_settings > .profile-picture > label > img').attr('src',$(this).find('img').attr('src'))}});$(function(){$("#acs_settings").trackChanges();$("#acs_settings").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();if($("#acs_settings").isChanged()||$('[data-ui="profile-picture-quick-preview"] > div.active').length){$('.tab-content.settings .progress').removeClass('d-none');var dataString=new FormData();if($('#acs_usertitle').length){dataString.append('acs_usertitle',$('#acs_settings [name="acs_usertitle"]').val())}
if($("#acs_profile_picture").val().length){dataString.append('acs_profile_picture',$("#acs_profile_picture").get(0).files[0]);if($("#acs_profile_picture").get(0).files[0]>app.config.settings.profile_photo_max_size){$('.tab-content.settings .progress').addClass('d-none');app.flashMessage(app.phrases.profile_photo_max_size,'warning');return!1}}
if($('[data-ui="profile-picture-quick-preview"] > div.active').length){dataString.append('acs_profile_picture_ready',$('[data-ui="profile-picture-quick-preview"] > div.active').data('name'))}
if($('#acs_settings [name="acs_mail"]').val().length){dataString.append('acs_mail',$('#acs_settings [name="acs_mail"]').val())}
app.post("account/change-settings",dataString,!1,!1).done(function(response){if(response.status==="ok"){$('.tab-content.settings .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.account_settings_success)}}).fail(function(xhr,status,err){console.log(status,err)})}}})});$(function(){$("#acs_password").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();$('.tab-content.security .progress').removeClass('d-none');if($('#acs_password  [name="password"]').val()!==$('#acs_password  [name="re-password"]').val()){$('.tab-content.security .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.account_passwords_must_much,'warning');return!1}
var dataString={acs_password:$('#acs_password [name="password"]').val(),acs_old_password:$('#acs_password [name="acs_old_password"]').val()}
app.post("account/change-password",dataString).done(function(response){if(response.status==="ok"){$('.tab-content.security .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.account_password_success)}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('change','#acs_profile_picture',function(){var reader=new FileReader();reader.onload=function(e){$('#acs_settings .profile-picture > label > img').attr('src',e.target.result)}
reader.readAsDataURL($(this).get(0).files[0])});$(function(){if($('body[data-template="account"]').length){var tab_regex=/account\/([a-z-]+)$/g;if(window.location.href.match(tab_regex)){var tab=tab_regex.exec(window.location.href);$('body[data-template="account"] [data-tab="'+tab[1]+'"]').click()}}});$(function(){$('#acs_two_step_verification input[name="acs_2fa"]').on('change',function(){if($(this).val()==1){$('#acs_two_step_verification .2fa_container').removeClass('d-none')}else{$('#acs_two_step_verification .2fa_container').addClass('d-none')}})});$(function(){$("#acs_two_step_verification").validate({onfocusout:!1,submitHandler:function(form,e){e.preventDefault();$('.tab-content.two-step-verification .progress').removeClass('d-none');$('#acs_two_step_verification .form-error span').text('');if($('#acs_two_step_verification input[name="acs_2fa"]:checked').val()==1){var dataString={acs_twofa_code:$('#acs_two_step_verification input[name="acs_twofa_code"]').val()};app.post("account/two-step-verification-on",dataString).done(function(response){if(response.status==="ok"){window.location.reload()}else if(response.status==="fail"){$('.tab-content.two-step-verification .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.two_step_verification_code_error,'warning')}}).fail(function(xhr,status,err){console.log(status,err)})}else{app.post("account/two-step-verification-off",{}).done(function(response){if(response.status==="ok"){$('.tab-content.two-step-verification .progress').addClass('d-none');window.location.reload()}}).fail(function(xhr,status,err){console.log(status,err)})}}})});$(document).on('click','[data-ui="account-remove-subscribe"]',function(e){e.preventDefault();$('.tab-content.subscriptions .progress').removeClass('d-none');var elem=$(this);$(this).addClass('active');var dataString={discussion_id:$(this).closest('.app-post').data('discussion-id')};app.post("post/discussion-remove-subscribe",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-post').remove();$('.tab-content.subscriptions .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.subscribe_remove)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="load-more-user-likes-posts"]',function(){$(this).remove();$('.post-loader-spin').show();var dataString={next_id:$(this).data('next-id'),current_page:$(this).data('current-page'),};app.post("post/account-user-likes-next-page",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="load-more-user-likes-posts"]').attr('data-current-page',response.current_page)
$('.post-loader-spin').hide();$('.tab-content.reactions .app-post:last').after(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="load-more-user-bookmarks-posts"]',function(){$(this).remove();$('.post-loader-spin').show();var dataString={next_id:$(this).data('next-id'),current_page:$(this).data('current-page'),};app.post("post/account-user-bookmarks-next-page",dataString).done(function(response){if(response.status==="ok"){$('[data-ui="load-more-user-bookmarks-posts"]').attr('data-current-page',response.current_page)
$('.post-loader-spin').hide();$('.tab-content.bookmarks .app-post:last').after(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="account-remove-bookmark"]',function(e){e.preventDefault();$('.tab-content.bookmarks .progress').removeClass('d-none');var elem=$(this);$(this).addClass('active');var dataString={post_id:$(this).data('post-id')};app.post("post/undo-bookmark",dataString).done(function(response){if(response.status==="ok"){elem.closest('.app-post').remove();$('.tab-content.bookmarks .progress').addClass('d-none');app.flashMessage(app.phrases.alert_messages.unbookmark_post)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="account-remove-friendship"]',function(e){e.preventDefault();$('.tab-content.friend-list .progress').removeClass('d-none');var elem=$(this);var dataString={user_id:$(this).closest('.app-friendships').data('user-id')};app.post("account/remove-friend",dataString).done(function(response){if(response.status==="ok"){$('.tab-content.friend-list .progress').addClass('d-none');elem.closest('.app-friendships').remove();app.flashMessage(app.phrases.alert_messages.remove_friend)}}).fail(function(xhr,status,err){console.log(status,err)})})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(document).on('click','[data-ui="show-conversation"]',function(e){e.preventDefault();$('.app-breadcrumb > div:last').text($(this).text());var confirmationMessage=app.phrases.alert_messages.not_saving_content;if($('#form-conversation-create textarea[name="text"]').length){if($('#form-conversation-create textarea[name="text"]').val().length){confirm(confirmationMessage)}}
if($('#form-message-create textarea[name="text"]').length){if($('#form-message-create textarea[name="text"]').val().length){confirm(confirmationMessage)}}
$('[data-ui="show-conversation"]').removeClass('active');$(this).addClass('active');$('.conversation-area').html('');$('.app-tab-container > .no-post').remove();$('.post-loader-spin').show();var dataString={conversation_id:$(this).data('conversation-id')};app.post("messages/conversation/get",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.conversation-area').html(response.template);if($('.conversation-area .messages > div:not(".d-none")').length>0){$('.conversation-area .messages').animate({scrollTop:$('.conversation-area .messages').children(':not(".d-none")').last().offset().top},'fast')}}}).fail(function(xhr,status,err){console.log(status,err)});window.history.pushState(null,null,app.config.settings.site_url+"/messages/conversation/"+$(this).data('conversation-id'))});$(document).bind('ajaxStop',function(){$("#form-message-create textarea").TextAreaExpander(40,100);$("#form-conversation-create textarea").TextAreaExpander(40,100);$('.conversation-area .messages > div').each(function(){if($(this).prev().hasClass($(this).attr('class').split(' ')[0])){$(this).find('.user').addClass('d-none');if($(this).hasClass('new-message')){$(this).prev().prev().find('small').addClass('d-none')}else{$(this).prev().find('small').addClass('d-none')}
$(this).prev().removeClass('mb-lg-3').addClass('mb-lg-1').removeClass('mb-4').addClass('mb-1')}})});$(document).on('keypress',function(e){if(e.which==13){e.preventDefault();$('#form-message-create button.submit').click()}});$(document).on('click','#form-message-create button.submit',function(e){if($('#form-message-create textarea[name="text"]').val().length>0){var dataString={message_id:$('.app-box').data('message-id'),text:$('#form-message-create textarea[name="text"]').val()}
$('.conversation-area .messages .me.new-message:last > span').text(dataString.text);$('.conversation-area .messages .me.new-message:last').removeClass('d-none');app.post("messages/conversation/send",dataString).done(function(response){if(response.status==="ok"){$('.conversation-area .messages .me.new-message > .anim-area > .post-loader-spin').removeClass('d-block');$('.conversation-area .messages .me.new-message > div:first').attr('data-is-seeing',0);$('.conversation-area .messages').animate({scrollTop:20000000},"fast");var clone_elem=$('.conversation-area .messages > .me.new-message:last').clone();$('.conversation-area .messages > .me.new-message:last').after(clone_elem);$('.conversation-area .messages .me.new-message:last > span').text('');$('.conversation-area .messages .me.new-message:last').addClass('d-none');$('#form-message-create textarea[name="text"]').val(app.phrases.alert_messages.wait_a_while);$('#form-message-create textarea[name="text"]').prop('disabled',!0);setTimeout(function(){$('#form-message-create textarea[name="text"]').removeAttr('disabled');$('#form-message-create textarea[name="text"]').val('')},5000)}}).fail(function(xhr,status,err){console.log(status,err)})}});$(document).on('click','[data-ui="conversation-refresher"]',function(e){$('body[data-template="messages"] .list-group-item[data-conversation-id="'+$('.app-box').data('message-id')+'"]').click()});$(document).on('click','[data-ui="conversation-archive"]',function(e){e.preventDefault();var dataString={message_id:$('.app-box').data('message-id')}
app.post("messages/conversation/archive",dataString).done(function(response){if(response.status==="ok"){var item=$('.list-group-item[data-conversation-id='+dataString.message_id+']').clone();$('.list-group-item[data-conversation-id='+dataString.message_id+']').remove();$('.app-archived-messages .list-group > .new').after(item);$('[data-ui="conversation-archive"] span').text($('[data-ui="conversation-archive"] span').data('toggle-text'));$('[data-ui="conversation-archive"]').attr('data-ui','conversation-remove-archive');$('body[data-template="messages"] [data-conversation-id="'+dataString.message_id+'"]').click();app.flashMessage(app.phrases.alert_messages.messages_archived)}}).fail(function(xhr,status,err){console.log(status,err)})});$(document).on('click','[data-ui="conversation-remove-archive"]',function(e){e.preventDefault();var dataString={message_id:$('.app-box').data('message-id')}
app.post("messages/conversation/remove-archive",dataString).done(function(response){if(response.status==="ok"){var item=$('.list-group-item[data-conversation-id='+dataString.message_id+']').clone();$('.list-group-item[data-conversation-id='+dataString.message_id+']').remove();$('.app-forums:not(".app-archived-messages") .list-group > .new').after(item);$('[data-ui="conversation-remove-archive"] span').text($('[data-ui="conversation-remove-archive"] span').data('text'));$('[data-ui="conversation-remove-archive"]').attr('data-ui','conversation-archive');$('body[data-template="messages"] [data-conversation-id="'+dataString.message_id+'"]').click();app.flashMessage(app.phrases.alert_messages.messages_removed_archive)}}).fail(function(xhr,status,err){console.log(status,err)})});$('#messages-quick-search :input').on("keyup click input",function(){if($(this).val().length>0){var value=$(this).val().toLowerCase();$('.app-forums:not(".app-search-messages") a').filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(value)>-1)})}else{$('.app-forums:not(".app-search-messages") a').show()}
$(document).on('click','#messages-quick-search .form-control-feedback',function(e){$('.app-forums:not(".app-search-messages") a').show()})});$(document).on('click','#form-conversation-create button.submit',function(e){if($('#form-conversation-create textarea[name="text"]').val().length>0){if($('#form-conversation-create :input[name="username"]').val().length<1){app.flashMessage(app.phrases.alert_messages.messages_write_a_username);return!1}
if($('#form-conversation-create :input[name="title"]').val().length<1){app.flashMessage(app.phrases.alert_messages.messages_write_a_title);return!1}
var dataString={title:$('#form-conversation-create :input[name="title"]').val(),text:$('#form-conversation-create textarea[name="text"]').val(),target_user:$('#form-conversation-create :input[name="username"]').val()}
if(dataString.target_user!=app.visitor.username){$('.conversation-area .messages .me.new-message > span').text(dataString.text);$('.conversation-area .messages .me.new-message').removeClass('d-none')}
app.post("messages/conversation/new",dataString).done(function(response){if(response.status==="ok"){$('#form-conversation-create textarea[name="text"]').val('');$('#form-conversation-create textarea[name="text"]').prop('disabled',!0);window.location.href=app.config.settings.site_url+'/messages/conversation/'+response.message_id}else if(response.status==="user-is-same"){app.flashMessage(app.phrases.alert_messages.messages_not_self)}}).fail(function(xhr,status,err){console.log(status,err)})}});$(document).on('click','[data-ui="send-message"]',function(e){$('.conversation-area').html('');$('.app-breadcrumb > div:last').text($(this).data('text'));$('.post-loader-spin').show();$('.app-tab-container > .no-post').remove();var user_regex=/messages\/new\/([0-9]+)$/g;if(window.location.href.match(user_regex)){var user_id=user_regex.exec(window.location.href);var dataString={target_user:user_id[1]}}else{var dataString={}}
app.post("messages/new",dataString).done(function(response){if(response.status==="ok"){$('.post-loader-spin').hide();$('.conversation-area').html(response.template)}});if(window.location.href.match(user_regex)){window.history.pushState(null,null,app.config.settings.site_url+"/messages/new/"+dataString.target_user)}else{window.history.pushState(null,null,app.config.settings.site_url+"/messages/new")}});$(document).bind('ajaxStop',function(){$('#form-conversation-create :input[name="username"]').donetyping(function(){if($(this).val().length>0&&$(this).val()!=' '){$('#form-conversation-create .user-results').removeClass('d-none');$('#form-conversation-create .user-results .post-loader-spin').show();$('#form-conversation-create .user-results .scrollable').html('');var dataString={keyword:$(this).val()};app.post("messages/conversation/search-user",dataString).done(function(response){if(response.status==="ok"){$('#form-conversation-create .user-results .post-loader-spin').hide();$('#form-conversation-create .user-results .scrollable').html(response.template)}}).fail(function(xhr,status,err){console.log(status,err)})}})});$(document).on('click','#form-conversation-create .user-results a',function(e){e.preventDefault();$('#form-conversation-create .user-results').addClass('d-none');$('#form-conversation-create :input[name="username"]').val($(this).data('username'))});window.addEventListener("beforeunload",function(e){if($('#form-conversation-create textarea[name="text"]').length){var confirmationMessage="Kaydetmediiniz veriler var!";if($('#form-conversation-create textarea[name="text"]').val().length){(e||window.event).returnValue=confirmationMessage;return confirmationMessage}}
if($('#form-message-create textarea[name="text"]').length){var confirmationMessage="Kaydetmediiniz veriler var!";if($('#form-message-create textarea[name="text"]').val().length){(e||window.event).returnValue=confirmationMessage;return confirmationMessage}}});$(function(){if($('body[data-template="messages"]').length){var tab_regex=/messages\/conversation\/([0-9]+)$/g;if(window.location.href.match(tab_regex)){var tab=tab_regex.exec(window.location.href);$('body[data-template="messages"] [data-conversation-id="'+tab[1]+'"]').click()}
var tab_regex=/messages\/new/g;if(window.location.href.match(tab_regex)){$('body[data-template="messages"] [data-ui="send-message"]').click();document.title='Yeni Mesaj - '+app.config.settings.site_title}}})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){if($('body[data-template="faq"]').length){var tab_regex=/pages\/faq#([a-z]+)$/g;if(window.location.href.match(tab_regex)){var tab_regex=tab_regex.exec(window.location.href);$('[data-tab="'+tab_regex[1]+'"]').click()}
$(document).on('click','.tab-content.resource-standarts a',function(e){e.preventDefault();$('[data-tab="'+$(this).attr('href').replace('#','')+'"]').click()})}})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";var o=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),t=function(t){t=e.trim(t);var o=function(o,e){t=t.replace(o,e)};return(o(/\n/gi,"<br />"),o(/\[b\]/gi,"<strong>"),o(/\[\/b\]/gi,"</strong>"),o(/\[i\]/gi,"<em>"),o(/\[\/i\]/gi,"</em>"),o(/\[u\]/gi,"<u>"),o(/\[\/u\]/gi,"</u>"),o(/\[s\]/gi,"<s>"),o(/\[\/s\]/gi,"</s>"),o(/\[url=([^\]]+)\](.*?)\[\/url\]/gi,'<a href="$1">$2</a>'),o(/\[url\](.*?)\[\/url\]/gi,'<a href="$1">$1</a>'),o(/\[img=(.*?)\](.*?)\[\/img\]/gi,'<img src="$2" alt="$1" />'),o(/\[color=(.*?)\](.*?)\[\/color\]/gi,'<font color="$1">$2</font>'),o(/\[size=(.*?)\](.*?)\[\/size\]/gi,'<span style="font-size: $1">$2</span>'),o(/\[heading=(.*?)\](.*?)\[\/heading\]/gi,'<h$1>$2</h$1>'),o(/\[background=(.*?)\](.*?)\[\/background\]/gi,'<span style="background-color: $1;">$2</span>'),o(/\[align=(.*?)\](.*?)\[\/align\]/gi,'<p style="text-align: $1;">$2</p>'),o(/\[list=disc\](.*?)\[\/list\](<br \/>)?/gi,'<ul>$1</ul>'),o(/\[list=decimal\](.*?)\[\/list\](<br \/>)?/gi,'<ol>$1</ol>'),o(/\[li\](.*?)\[\/li](<br \/>)?/gi,'<li>$1</li>'),o(/\[table=(.*?);border=(.*?)\](.*?)\[\/table\](<br \/>)?/gi,'<table style="$1" border="$2">$3</table>'),o(/\[tr\](.*?)\[\/tr\](<br \/>)?/gi,'<tr>$1</tr>'),o(/\[td=(.*?)\](.*?)\[\/td\](<br \/>)?/gi,'<td style="$1">$2</td>'),o(/\[code=(.*?)\](.*?)\[\/code\]/gi,'<pre class="language-$1"><code class="language-$1">$2</code></pre>'),t)};!(function i(){o.add("bbcodeCustom",function(o){o.on("BeforeSetContent",function(o){o.content=t(o.content)}),o.on("PostProcess",function(o){o.set&&(o.content=t(o.content)),o.get&&(o.content=(function(t){t=e.trim(t);var o=function(o,e){t=t.replace(o,e)};return(o(/<a.*?href=\"(.*?)\".*?>(.*?)<\/a>/gi,"[url=$1]$2[/url]"),o(/<font.*?color=\"(.*?)\".*?class=\"codeStyle\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),o(/<font.*?color=\"(.*?)\".*?class=\"quoteStyle\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),o(/<font.*?class=\"codeStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[code][color=$1]$2[/color][/code]"),o(/<font.*?class=\"quoteStyle\".*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[quote][color=$1]$2[/color][/quote]"),o(/<span style=\"color: ?(.*?);\">(.*?)<\/span>/gi,"[color=$1]$2[/color]"),o(/<font.*?color=\"(.*?)\".*?>(.*?)<\/font>/gi,"[color=$1]$2[/color]"),o(/<span style=\"font-size:(.*?);\">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),o(/<font>(.*?)<\/font>/gi,"$1"),o(/<img class="js-Twemoji_MentionEditor"(?:.*?)alt="(.*?)" \/>/gi,'$1'),o(/<img.*?src=\"(.*?)\" alt=\"(.*?)\".*?\/>/gi,"[img=$2]$1[/img]"),o(/<span class=\"codeStyle\">(.*?)<\/span>/gi,"[code]$1[/code]"),o(/<span class=\"quoteStyle\">(.*?)<\/span>/gi,"[quote]$1[/quote]"),o(/<strong class=\"codeStyle\">(.*?)<\/strong>/gi,"[code][b]$1[/b][/code]"),o(/<strong class=\"quoteStyle\">(.*?)<\/strong>/gi,"[quote][b]$1[/b][/quote]"),o(/<em class=\"codeStyle\">(.*?)<\/em>/gi,"[code][i]$1[/i][/code]"),o(/<em class=\"quoteStyle\">(.*?)<\/em>/gi,"[quote][i]$1[/i][/quote]"),o(/<u class=\"codeStyle\">(.*?)<\/u>/gi,"[code][u]$1[/u][/code]"),o(/<u class=\"quoteStyle\">(.*?)<\/u>/gi,"[quote][u]$1[/u][/quote]"),o(/<\/(strong|b)>/gi,"[/b]"),o(/<(strong|b)>/gi,"[b]"),o(/<(s|b)>/gi,"[s]"),o(/<\/(em|i)>/gi,"[/i]"),o(/<(em|i)>/gi,"[i]"),o(/<\/u>/gi,"[/u]"),o(/<\/s>/gi,"[/s]"),o(/<span style=\"text-decoration: ?underline;\">(.*?)<\/span>/gi,"[u]$1[/u]"),o(/<span style=\"text-decoration: ?line-through;\">(.*?)<\/span>/gi,"[s]$1[/s]"),o(/<u>/gi,"[u]"),o(/<blockquote[^>]*>/gi,"[quote]"),o(/<\/blockquote>/gi,"[/quote]"),o(/<br \/>/gi,"\n"),o(/<br\/>/gi,"\n"),o(/<br>/gi,"\n"),o(/&nbsp;|\u00a0/gi," "),o(/&quot;/gi,'"'),o(/&lt;/gi,"<"),o(/&gt;/gi,">"),o(/&amp;/gi,"&"),o(/<ul>/gi,"[list=disc]"),o(/<\/ul>/gi,"[/list]"),o(/<ol>/gi,"[list=decimal]"),o(/<\/ol>/gi,"[/list]"),o(/<li>(.*?)<\/li>/gi,"[li]$1[/li]"),o(/<p style="text-align: (.*?);">(.*?)<\/p>/gi,"[align=$1]$2[/align]"),o(/<p>/gi,""),o(/<\/p>/gi,""),o(/<span style="font-size: (.*?);">(.*?)<\/span>/gi,"[size=$1]$2[/size]"),o(/<span style="background-color: (.*?);">(.*?)<\/span>/gi,"[background=$1]$2[/background]"),o(/<pre class="language-(.*?)"><code>(.*?)<\/code><\/pre>/gi,"[code=$1]$2[/code]"),o(/<h(1|2|3|4|5|6)>(.*?)<\/h(1|2|3|4|5|6)>/gi,'[heading=$1]$2[/heading]'),o(/<pre>(.*?)<\/pre>/gi,'[pre]$1[/pre]'),o(/<span style="font-family: (.*?);">(.*?)<\/span>/gi,'[font=$1]$2[/font]'),o(/<table style="(.*?);" border="(.*?)">/gi,'[table=$1;border=$2]'),o(/<tbody>/gi,''),o(/<tr( style=".*?")?>/gi,'[tr]'),o(/<td style="(.*?)">(.*?)<\/td>/gi,'[td=$1]$2[/td]'),o(/<\/tbody>/gi,''),o(/<\/tr>/gi,'[/tr]'),o(/<\/table>/gi,'[/table]'),t)})(o.content))})})})()}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){tinymce.PluginManager.add("userTagging",function(editor,url){editor.ui.registry.addAutocompleter('autocompleter-user-tagging',{ch:'@',minChars:2,columns:1,fetch:function(pattern){return new tinymce.util.Promise(function(resolve){var dataString={pattern:pattern}
app.post("post/user-tagging",dataString).done(function(response){if(response.status==="ok"){var data=response.data;var results=[];for(var i=0;i<data.length;i++){var result=data[i];results.push({value:result.username,text:result.username,icon:'<img class="rounded-circle w-100" src="'+app.config.settings.public_dir+'/uploads/profile_picture/'+result.profile_picture+'" />'})};results.sort(function(a,b){var x=a.text.toLowerCase();var y=b.text.toLowerCase();if(x<y){return-1}
if(x>y){return 1}
return 0});resolve(results)}}).fail(function(xhr,status,err){console.log(status,err)})})},onAction:function(autocompleteApi,rng,value){var render='<span style="color: rgb(53, 152, 219);"><strong>@'+value+';</strong></span>';editor.selection.setRng(rng);editor.insertContent(render);editor.execCommand('Forecolor');autocompleteApi.hide()}});return{getMetadata:function(){return{name:"Mention User tagging for TinyMCE 5",url:"https://www.r10.net/members/90047-scarecrow.html"}}}})})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){tinymce.PluginManager.add("spoiler",function(editor,url){editor.ui.registry.addButton('spoiler',{icon:'spoiler',tooltip:'Spoiler',onAction:function(_){editor.insertContent('\n[spoiler=Spoiler!]'+editor.selection.getContent()+'[/spoiler]\n')}})})})}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";var global=tinymce.util.Tools.resolve('tinymce.PluginManager');var DEFAULT_ID='tinymce.plugins.emoticons';var getEmoticonDatabase=function(editor){return editor.getParam('emoticons_database','emojis','string')};var getEmoticonDatabaseUrl=function(editor,pluginUrl){var database=getEmoticonDatabase(editor);return editor.getParam('emoticons_database_url',pluginUrl+'/js/'+database+editor.suffix+'.js','string')};var getEmoticonDatabaseId=function(editor){return editor.getParam('emoticons_database_id',DEFAULT_ID,'string')};var getAppendedEmoticons=function(editor){return editor.getParam('emoticons_append',{},'object')};var getEmotionsImageUrl=function(editor){return editor.getParam('emoticons_images_url','https://twemoji.maxcdn.com/v/13.0.1/72x72/','string')};var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)
if(Object.prototype.hasOwnProperty.call(s,p))
t[p]=s[p]}
return t};return __assign.apply(this,arguments)};var Cell=function(initial){var value=initial;var get=function(){return value};var set=function(v){value=v};return{get:get,set:set}};var hasOwnProperty=Object.prototype.hasOwnProperty;var shallow=function(old,nu){return nu};var baseMerge=function(merger){return function(){var objects=new Array(arguments.length);for(var i=0;i<objects.length;i++){objects[i]=arguments[i]}
if(objects.length===0){throw new Error('Can\'t merge zero objects')}
var ret={};for(var j=0;j<objects.length;j++){var curObject=objects[j];for(var key in curObject){if(hasOwnProperty.call(curObject,key)){ret[key]=merger(ret[key],curObject[key])}}}
return ret}};var merge=baseMerge(shallow);var noop=function(){};var constant=function(value){return function(){return value}};var never=constant(!1);var always=constant(!0);var none=function(){return NONE};var NONE=function(){var eq=function(o){return o.isNone()};var call=function(thunk){return thunk()};var id=function(n){return n};var me={fold:function(n,_s){return n()},is:never,isSome:never,isNone:always,getOr:id,getOrThunk:call,getOrDie:function(msg){throw new Error(msg||'error: getOrDie called on none.')},getOrNull:constant(null),getOrUndefined:constant(undefined),or:id,orThunk:call,map:none,each:noop,bind:none,exists:never,forall:always,filter:none,equals:eq,equals_:eq,toArray:function(){return[]},toString:constant('none()')};return me}();var some=function(a){var constant_a=constant(a);var self=function(){return me};var bind=function(f){return f(a)};var me={fold:function(n,s){return s(a)},is:function(v){return a===v},isSome:always,isNone:never,getOr:constant_a,getOrThunk:constant_a,getOrDie:constant_a,getOrNull:constant_a,getOrUndefined:constant_a,or:self,orThunk:self,map:function(f){return some(f(a))},each:function(f){f(a)},bind:bind,exists:bind,forall:bind,filter:function(f){return f(a)?me:NONE},toArray:function(){return[a]},toString:function(){return'some('+a+')'},equals:function(o){return o.is(a)},equals_:function(o,elementEq){return o.fold(never,function(b){return elementEq(a,b)})}};return me};var from=function(value){return value===null||value===undefined?NONE:some(value)};var Optional={some:some,none:none,from:from};var keys=Object.keys;var hasOwnProperty$1=Object.hasOwnProperty;var each=function(obj,f){var props=keys(obj);for(var k=0,len=props.length;k<len;k++){var i=props[k];var x=obj[i];f(x,i)}};var map=function(obj,f){return tupleMap(obj,function(x,i){return{k:i,v:f(x,i)}})};var tupleMap=function(obj,f){var r={};each(obj,function(x,i){var tuple=f(x,i);r[tuple.k]=tuple.v});return r};var has=function(obj,key){return hasOwnProperty$1.call(obj,key)};var checkRange=function(str,substr,start){return substr===''||str.length>=substr.length&&str.substr(start,start+substr.length)===substr};var contains=function(str,substr){return str.indexOf(substr)!==-1};var startsWith=function(str,prefix){return checkRange(str,prefix,0)};var global$1=tinymce.util.Tools.resolve('tinymce.Resource');var global$2=tinymce.util.Tools.resolve('tinymce.util.Delay');var global$3=tinymce.util.Tools.resolve('tinymce.util.Promise');var ALL_CATEGORY='All';var categoryNameMap={symbols:'Symbols',people:'People',animals_and_nature:'Animals and Nature',food_and_drink:'Food and Drink',activity:'Activity',travel_and_places:'Travel and Places',objects:'Objects',flags:'Flags',user:'User Defined'};var translateCategory=function(categories,name){return has(categories,name)?categories[name]:name};var getUserDefinedEmoticons=function(editor){var userDefinedEmoticons=getAppendedEmoticons(editor);return map(userDefinedEmoticons,function(value){return __assign({keywords:[],category:'user'},value)})};var initDatabase=function(editor,databaseUrl,databaseId){var categories=Cell(Optional.none());var all=Cell(Optional.none());var emojiImagesUrl=getEmotionsImageUrl(editor);var getEmoji=function(lib){if(startsWith(lib.char,'<img')){return lib.char.replace(/src="([^"]+)"/,function(match,url){return'src="'+emojiImagesUrl+url+'"'})}else{var parse=twemoji.parse(lib.char);return parse.replace(/src="([^"]+)"/,function(match,url){return'style="width: 22px"'+match+''})}};var processEmojis=function(emojis){var cats={};var everything=[];each(emojis,function(lib,title){var entry={title:title,keywords:lib.keywords,char:getEmoji(lib),category:translateCategory(categoryNameMap,lib.category)};var current=cats[entry.category]!==undefined?cats[entry.category]:[];cats[entry.category]=current.concat([entry]);everything.push(entry)});categories.set(Optional.some(cats));all.set(Optional.some(everything))};editor.on('init',function(){global$1.load(databaseId,databaseUrl).then(function(emojis){var userEmojis=getUserDefinedEmoticons(editor);processEmojis(merge(emojis,userEmojis))},function(err){console.log('Failed to load emoticons: '+err);categories.set(Optional.some({}));all.set(Optional.some([]))})});var listCategory=function(category){if(category===ALL_CATEGORY){return listAll()}
return categories.get().bind(function(cats){return Optional.from(cats[category])}).getOr([])};var listAll=function(){return all.get().getOr([])};var listCategories=function(){return[ALL_CATEGORY].concat(keys(categories.get().getOr({})))};var waitForLoad=function(){if(hasLoaded()){return global$3.resolve(!0)}else{return new global$3(function(resolve,reject){var numRetries=15;var interval=global$2.setInterval(function(){if(hasLoaded()){global$2.clearInterval(interval);resolve(!0)}else{numRetries--;if(numRetries<0){console.log('Could not load emojis from url: '+databaseUrl);global$2.clearInterval(interval);reject(!1)}}},100)})}};var hasLoaded=function(){return categories.get().isSome()&&all.get().isSome()};return{listCategories:listCategories,hasLoaded:hasLoaded,waitForLoad:waitForLoad,listAll:listAll,listCategory:listCategory}};var exists=function(xs,pred){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];if(pred(x,i)){return!0}}
return!1};var map$1=function(xs,f){var len=xs.length;var r=new Array(len);for(var i=0;i<len;i++){var x=xs[i];r[i]=f(x,i)}
return r};var each$1=function(xs,f){for(var i=0,len=xs.length;i<len;i++){var x=xs[i];f(x,i)}};var setup=function(editor){editor.on('PreInit',function(){editor.parser.addAttributeFilter('data-emoticon',function(nodes){each$1(nodes,function(node){node.attr('data-mce-resize','false');node.attr('data-mce-placeholder','1')})})})};var emojiMatches=function(emoji,lowerCasePattern){return contains(emoji.title.toLowerCase(),lowerCasePattern)||exists(emoji.keywords,function(k){return contains(k.toLowerCase(),lowerCasePattern)})};var emojisFrom=function(list,pattern,maxResults){var matches=[];var lowerCasePattern=pattern.toLowerCase();var reachedLimit=maxResults.fold(function(){return never},function(max){return function(size){return size>=max}});for(var i=0;i<list.length;i++){if(pattern.length===0||emojiMatches(list[i],lowerCasePattern)){matches.push({value:list[i].char,text:list[i].title,icon:list[i].char});if(reachedLimit(matches.length)){break}}}
return matches};var init=function(editor,database){editor.ui.registry.addAutocompleter('emoticons',{ch:':',columns:'auto',minChars:2,fetch:function(pattern,maxResults){return database.waitForLoad().then(function(){var candidates=database.listAll();return emojisFrom(candidates,pattern,Optional.some(maxResults))})},onAction:function(autocompleteApi,rng,value){editor.selection.setRng(rng);editor.insertContent(value);autocompleteApi.hide()}})};var last=function(fn,rate){var timer=null;var cancel=function(){if(timer!==null){clearTimeout(timer);timer=null}};var throttle=function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}
if(timer!==null){clearTimeout(timer)}
timer=setTimeout(function(){fn.apply(null,args);timer=null},rate)};return{cancel:cancel,throttle:throttle}};var insertEmoticon=function(editor,ch){editor.insertContent('&nbsp;'+ch+'&nbsp;')};var patternName='pattern';var open=function(editor,database){var initialState={pattern:'',results:emojisFrom(database.listAll(),'',Optional.some(300))};var currentTab=Cell(ALL_CATEGORY);var scan=function(dialogApi){var dialogData=dialogApi.getData();var category=currentTab.get();var candidates=database.listCategory(category);var results=emojisFrom(candidates,dialogData[patternName],category===ALL_CATEGORY?Optional.some(300):Optional.none());dialogApi.setData({results:results})};var updateFilter=last(function(dialogApi){scan(dialogApi)},200);var searchField={label:'Search',type:'input',name:patternName};var resultsField={type:'collection',name:'results'};var getInitialState=function(){var body={type:'tabpanel',tabs:map$1(database.listCategories(),function(cat){return{title:cat,name:cat,items:[searchField,resultsField]}})};return{title:'Emoticons',size:'normal',body:body,initialData:initialState,onTabChange:function(dialogApi,details){currentTab.set(details.newTabName);updateFilter.throttle(dialogApi)},onChange:updateFilter.throttle,onAction:function(dialogApi,actionData){if(actionData.name==='results'){insertEmoticon(editor,actionData.value);dialogApi.close()}},buttons:[{type:'cancel',text:'Close',primary:!0}]}};var dialogApi=editor.windowManager.open(getInitialState());dialogApi.focus(patternName);if(!database.hasLoaded()){dialogApi.block('Loading emoticons...');database.waitForLoad().then(function(){dialogApi.redial(getInitialState());updateFilter.throttle(dialogApi);dialogApi.focus(patternName);dialogApi.unblock()}).catch(function(_err){dialogApi.redial({title:'Emoticons',body:{type:'panel',items:[{type:'alertbanner',level:'error',icon:'warning',text:'<p>Could not load emoticons</p>'}]},buttons:[{type:'cancel',text:'Close',primary:!0}],initialData:{pattern:'',results:[]}});dialogApi.focus(patternName);dialogApi.unblock()})}};var register=function(editor,database){var onAction=function(){return open(editor,database)};editor.ui.registry.addButton('emoticons',{tooltip:'Emoticons',icon:'emoji',onAction:onAction});editor.ui.registry.addMenuItem('emoticons',{text:'Emoticons...',icon:'emoji',onAction:onAction})};function Plugin(){global.add('customEmoticons',function(editor,pluginUrl){var databaseUrl=getEmoticonDatabaseUrl(editor,pluginUrl);var databaseId=getEmoticonDatabaseId(editor);var database=initDatabase(editor,databaseUrl,databaseId);register(editor,database);init(editor,database);setup(editor)})}
Plugin()}(window.jQuery,window,document);if(window.jQuery===undefined)jQuery=$={};!function($,window,document){"use strict";$(function(){tinymce.PluginManager.add("quoteMessage",function(editor,url){editor.ui.registry.addButton('quoteMessage',{icon:'quoteMessage',tooltip:'Quote',onAction:function(_){editor.insertContent('\n[quote]'+editor.selection.getContent()+'[/quote]\n')}})})})}(window.jQuery,window,document)